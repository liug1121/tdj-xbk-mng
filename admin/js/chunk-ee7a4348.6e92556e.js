(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ee7a4348"],{1954:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login_container"},[s("div",{staticClass:"login_header"}),s("div",{staticClass:"login_footer"}),s("div",{staticClass:"login_box"},[s("div",{staticClass:"login_title"},[e._v("流量运营平台")]),s("el-form",{ref:"loginFormRef",staticClass:"login_form",attrs:{model:e.loginForm,rules:e.loginFormRules,"label-width":"0"}},[s("el-form-item",{attrs:{prop:"userName"}},[s("el-input",{attrs:{"prefix-icon":"el-icon-user",placeholder:"请您输入用户名"},model:{value:e.loginForm.userName,callback:function(t){e.$set(e.loginForm,"userName",t)},expression:"loginForm.userName"}})],1),s("el-form-item",{attrs:{prop:"pwd"}},[s("el-input",{attrs:{"prefix-icon":"el-icon-lock",type:"password",placeholder:"请您输入密码"},model:{value:e.loginForm.pwd,callback:function(t){e.$set(e.loginForm,"pwd",t)},expression:"loginForm.pwd"}})],1),s("el-form-item",{attrs:{prop:"pwd"}},[s("div",{staticClass:"vercode"},[s("div",{staticClass:"vercode-input"},[s("el-input",{attrs:{placeholder:"请您输入验证码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.adminLogin.apply(null,arguments)}},model:{value:e.loginForm.verCode,callback:function(t){e.$set(e.loginForm,"verCode",t)},expression:"loginForm.verCode"}})],1),s("div",{staticClass:"vercode-img",on:{click:e.refreshImg}},[s("img",{attrs:{src:e.verCode}})])])]),s("el-form-item",{staticClass:"btns"},[s("el-button",{staticClass:"NewButton",attrs:{type:"primary"},on:{click:e.adminLogin}},[e._v("登录")]),s("el-button",{attrs:{type:"primary"},on:{click:e.resetLoginForm}},[e._v("重置")])],1)],1)],1),1==e.slideShow?s("div",{staticClass:"slide"},[s("div",{staticClass:"slide-close",on:{click:e.closeSlide}},[e._v("X")]),s("slide-verify",{attrs:{l:42,r:10,w:310,h:155,"slider-text":"向右滑动"},on:{success:e.onSuccess,fail:e.onFail,refresh:e.onRefresh}})],1):e._e()])},o=[],r=s("365c"),i={apiLogin:function(e){return r["b"]("boss/v1.0/users/login",e)},apiGetVerCode:function(e){return r["a"]("boss/v1.0/users/login/verCode",e)}},a={data:function(){return{verCode:"",verCodeKey:"",msg:"",slideShow:!1,loginForm:{userName:"",pwd:""},loginFormRules:{username:[{required:!0,message:"请输入登录名称",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],pwd:[{required:!0,message:"请输入登录密码",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}]}}},mounted:function(){this.getVerCode()},methods:{refreshImg:function(){this.getVerCode()},getVerCode:function(){var e=this,t={};i.apiGetVerCode(t).then((function(t){0===t.resultCode?(e.verCode=t.data.data,e.verCodeKey=t.data.key):e.$message.error(t.resultInfo)}))},closeSlide:function(){this.slideShow=!1},onSuccess:function(){var e=this;this.msg="login success",this.slideShow=!1,this.$refs.loginFormRef.validate((function(t){if(t){var s={userName:e.loginForm.userName,pwd:e.loginForm.pwd,verCode:e.loginForm.verCode,verCodeUid:e.verCodeKey};i.apiLogin(s).then((function(t){0===t.resultCode?(e.$message.success("登录成功"),window.sessionStorage.setItem("userName",t.data.userName),window.sessionStorage.setItem("token",t.data.token),window.sessionStorage.setItem("userType",t.data.type),window.sessionStorage.setItem("usingInDevice",t.data.usingInDevice),window.sessionStorage.setItem("usingInXuebaka",t.data.usingInXuebaka),window.sessionStorage.setItem("managerType",t.data.managerType),window.sessionStorage.setItem("AuthMenus",JSON.stringify(t.data.managerAuthResp)),window.sessionStorage.setItem("AuthOpts",JSON.stringify(t.data.managerAuthOpts)),e.$router.push("/main")):e.$message.error(t.resultInfo)}))}}))},onFail:function(){this.msg=""},onRefresh:function(){this.msg=""},resetLoginForm:function(){this.$refs.loginFormRef.resetFields()},adminLogin:function(){var e=this;this.$refs.loginFormRef.validate((function(t){if(t){var s={userName:e.loginForm.userName,pwd:e.loginForm.pwd,verCode:e.loginForm.verCode,verCodeUid:e.verCodeKey};i.apiLogin(s).then((function(t){0===t.resultCode?(e.$message.success("登录成功"),window.sessionStorage.setItem("userName",t.data.userName),window.sessionStorage.setItem("token",t.data.token),window.sessionStorage.setItem("userType",t.data.type),window.sessionStorage.setItem("usingInDevice",t.data.usingInDevice),window.sessionStorage.setItem("usingInXuebaka",t.data.usingInXuebaka),window.sessionStorage.setItem("managerType",t.data.managerType),window.sessionStorage.setItem("AuthMenus",JSON.stringify(t.data.managerAuthResp)),window.sessionStorage.setItem("AuthOpts",JSON.stringify(t.data.managerAuthOpts)),e.$router.push("/main")):e.$message.error(t.resultInfo)}))}}))}}},u=a,d=(s("6e32"),s("2877")),l=Object(d["a"])(u,n,o,!1,null,"16f2ec46",null);t["default"]=l.exports},"365c":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return i}));s("d3b7");var n=s("bc3a"),o=s.n(n);o.a.defaults.timeout=5e5,o.a.defaults.headers.post["Content-Type"]="application/json",o.a.interceptors.request.use((function(e){return e.headers.token=window.sessionStorage.getItem("token"),e}),(function(e){return Promise.reject(e)})),o.a.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));var r=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o.a.post(e,t,s).then((function(e){return e.data}))},i=function(e,t){return o.a.get(e,{params:t}).then((function(e){return e.data}))}},"6e32":function(e,t,s){"use strict";s("ffdb")},ffdb:function(e,t,s){}}]);
//# sourceMappingURL=chunk-ee7a4348.6e92556e.js.map