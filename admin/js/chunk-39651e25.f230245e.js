(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39651e25"],{"48c0":function(e,n,a){"use strict";a("77f6")},5899:function(e,n){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,n,a){var t=a("1d80"),l=a("5899"),i="["+l+"]",s=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),r=function(e){return function(n){var a=String(t(n));return 1&e&&(a=a.replace(s,"")),2&e&&(a=a.replace(o,"")),a}};e.exports={start:r(1),end:r(2),trim:r(3)}},5986:function(e,n,a){"use strict";a("99af");var t=a("365c");n["a"]={apiChannelsList:function(e){return t["b"]("boss/v1.0/channels",e)},apiChannelsAdd:function(e){return t["b"]("boss/v1.0/channels/add",e)},apiChannelsQrcode:function(e){return t["b"]("boss/v1.0/channels/qrcode",e)},apiChannelsAllList:function(e){return t["a"]("boss/v1.0/channels/all",e)},apiChannelsCards:function(e){return t["b"]("boss/v1.0/channels/cards",e)},apiChannelsCardsDistribute:function(e){return t["b"]("boss/v1.0/channels/cards/distribute",e)},apiChannelsCardsDistributeFile:function(e){return t["b"]("boss/v1.0/channels/cards/distribute/fileimport",e)},apiChannelsCardsUpload:function(e,n){return t["b"]("boss/v1.0/channels/cards/distribute/upload?channelId=".concat(e),n,{headers:{"content-type":"multipart/form-data"}})},apiChannelsCardsDistributeIccid:function(e){return t["b"]("boss/v1.0/channels/cards/distribute/iccids",e)},apiChannelsCardDownload:function(e){var n=e.channelId,a=e.iccidStart,l=e.iccidEnd;return t["a"]("/boss/v1.0/channels/card/download/".concat(n,"/").concat(a,"/").concat(l))},apiChannelsDetails:function(e){return t["b"]("boss/v1.0/channels/details",e)},apiChannelsModify:function(e){return t["b"]("boss/v1.0/channels/modify",e)},apiChannelsPackages:function(e){return t["b"]("boss/v1.0/channels/packages",e)},apiGoodsList:function(e){return t["b"]("boss/v1.0/goods",e)},apiChannelsPackagesAdd:function(e){return t["b"]("boss/v1.0/channels/packages/add",e)},apiChannelsGoodsModify:function(e){return t["b"]("boss/v1.0/channels/goods/modify",e)},apiChannelsPackagesStatusModify:function(e){return t["b"]("boss/v1.0/channels/packages/status/modify",e)},apiChannelsStatusModify:function(e){return t["b"]("boss/v1.0/channels/status/modify",e)},apiProvincesList:function(e){return t["a"]("boss/v1.0/provinces",e)},apiPackagesList:function(e){return t["b"]("boss/v1.0/packages",e)},apiAddChannelManager:function(e){return t["b"]("boss/v1.0/channels/manager/add",e)},apiRemoveChannel:function(e){return t["b"]("boss/v1.0/channel/remove",e)}}},7156:function(e,n,a){var t=a("861d"),l=a("d2bb");e.exports=function(e,n,a){var i,s;return l&&"function"==typeof(i=n.constructor)&&i!==a&&t(s=i.prototype)&&s!==a.prototype&&l(e,s),e}},"77f6":function(e,n,a){},8593:function(e,n,a){"use strict";var t=a("365c");n["a"]={getAllSysFunctions:function(e){return t["a"]("boss/v1.0/system/functions",e)},getAllSysRoles:function(e){return t["a"]("boss/v1.0/system/roles",e)},getAllSysRoleFunctions:function(e){return t["a"]("boss/v1.0/system/roleFunctions",e)},getSysManagerRoles:function(e){return t["b"]("boss/v1.0/system/managerRoles",e)},getAllSysManagers:function(e){return t["b"]("boss/v1.0/system/managers",e)},editManger:function(e){return t["b"]("boss/v1.0/system/managers/edit",e)},editMangerRoles:function(e){return t["b"]("boss/v1.0/system/managerRoles/edit",e)},getRoleFunctions:function(e){return t["b"]("boss/v1.0/system/role/functions",e)},editRoleFunctions:function(e){return t["b"]("boss/v1.0/system/role/functions/modify",e)},addRole:function(e){return t["b"]("boss/v1.0/system/roles/add",e)},editRole:function(e){return t["b"]("boss/v1.0/system/roles/modify",e)},removeRole:function(e){return t["b"]("boss/v1.0/system/roles/remove",e)},addManager:function(e){return t["b"]("boss/v1.0/system/managers/add",e)},getPushLogs:function(e){return t["b"]("boss/v1.0/gateway/pushLogs",e)},getPushInfos:function(e){return t["b"]("boss/v1.0/gateway/pushinfo/all",e)},addPushInfo:function(e){return t["b"]("boss/v1.0/gateway/pushInfo/add",e)},modifyPushInfo:function(e){return t["b"]("boss/v1.0/gateway/pushInfo/modify",e)},removePushInfo:function(e){return t["b"]("boss/v1.0/gateway/pushInfo/remove",e)},getPushStaticsInfo:function(e){return t["b"]("boss/v1.0/gateway/pushinfo/statics",e)}}},a9e3:function(e,n,a){"use strict";var t=a("83ab"),l=a("da84"),i=a("94ca"),s=a("6eeb"),o=a("5135"),r=a("c6b6"),d=a("7156"),h=a("c04e"),c=a("d039"),u=a("7c73"),m=a("241c").f,g=a("06cf").f,f=a("9bf2").f,C=a("58a8").trim,p="Number",b=l[p],v=b.prototype,I=r(u(v))==p,y=function(e){var n,a,t,l,i,s,o,r,d=h(e,!1);if("string"==typeof d&&d.length>2)if(d=C(d),n=d.charCodeAt(0),43===n||45===n){if(a=d.charCodeAt(2),88===a||120===a)return NaN}else if(48===n){switch(d.charCodeAt(1)){case 66:case 98:t=2,l=49;break;case 79:case 111:t=8,l=55;break;default:return+d}for(i=d.slice(2),s=i.length,o=0;o<s;o++)if(r=i.charCodeAt(o),r<48||r>l)return NaN;return parseInt(i,t)}return+d};if(i(p,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var w,F=function(e){var n=arguments.length<1?0:e,a=this;return a instanceof F&&(I?c((function(){v.valueOf.call(a)})):r(a)!=p)?d(new b(y(n)),a,F):y(n)},M=t?m(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),x=0;M.length>x;x++)o(b,w=M[x])&&!o(F,w)&&f(F,w,g(b,w));F.prototype=v,v.constructor=F,s(l,p,F)}},f2ff:function(e,n,a){"use strict";a.r(n);var t,l=function(){var e=this,n=e.$createElement,a=e._self._c||n;return a("div",{staticClass:"box_subject"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("channelTree",{ref:"channerTreeRef",staticStyle:{"max-height":"680px",overflow:"auto"},on:{channelChick:e.channelChick,getChannelId:e.getChannelId}})],1),a("el-col",{attrs:{span:18}},[a("el-card",[a("div",{staticClass:"button_content"},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:{indentity:"bigflowChannelList-add"},expression:"{indentity:'bigflowChannelList-add'}"}],attrs:{size:"medium",type:"primary",icon:"el-icon-plus"},on:{click:e.showMailConfigDlg}},[e._v("添加渠道邮箱")])],1),a("el-table",{attrs:{data:e.mailCofings,border:"","max-height":"510",align:"center","cell-style":{height:"38px",padding:0}}},e._l(e.table_mail_column,(function(n,t){return a("el-table-column",{key:t,attrs:{prop:n.prop,label:n.label,align:"center",fixed:!!n.fixed&&n.fixed,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return["opts"==n.prop?a("div",{directives:[{name:"permission",rawName:"v-permission",value:{indentity:"bigflowChannelList-add"},expression:"{indentity:'bigflowChannelList-add'}"}]},[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.showMailConfigDlg(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.okRemoveMailConfig(t.row)}}},[e._v("删除")])],1):e._e(),"channelName"==n.prop?a("div",[a("span",[e._v(e._s(e.selectedChannelName))])]):a("div",[a("div",{domProps:{innerHTML:e._s(t.row[n.prop])}})])]}}],null,!0)})})),1)],1),a("el-card",[a("div",{staticClass:"button_content"},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:{indentity:"bigflowChannelList-add"},expression:"{indentity:'bigflowChannelList-add'}"}],attrs:{size:"medium",type:"primary",icon:"el-icon-plus"},on:{click:function(n){return e.showAddImeiDlg()}}},[e._v("添加imei规则")])],1),a("el-table",{attrs:{data:e.imeiRules,border:"","max-height":"510",align:"center","cell-style":{height:"38px",padding:0}}},e._l(e.table_imei_column,(function(n,t){return a("el-table-column",{key:t,attrs:{prop:n.prop,label:n.label,align:"center",fixed:!!n.fixed&&n.fixed,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return["opts"==n.prop?a("div",{directives:[{name:"permission",rawName:"v-permission",value:{indentity:"bigflowChannelList-add"},expression:"{indentity:'bigflowChannelList-add'}"}]},[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.showEditImeiDlg(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.deleteImei(t.row)}}},[e._v("删除")])],1):e._e(),"channelName"==n.prop?a("div",[a("span",[e._v(e._s(e.selectedChannelName))])]):a("div",[a("div",{domProps:{innerHTML:e._s(t.row[n.prop])}})])]}}],null,!0)})})),1)],1),a("el-card",[a("div",{staticClass:"button_content"},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:{indentity:"bigflowChannelList-add"},expression:"{indentity:'bigflowChannelList-add'}"}],attrs:{size:"medium",type:"primary",icon:"el-icon-plus"},on:{click:e.showAddChannel}},[e._v("添加渠道")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:{indentity:"bigflowChannelList-add"},expression:"{indentity:'bigflowChannelList-add'}"}],attrs:{size:"medium",type:"primary",icon:"el-icon-plus"},on:{click:e.showAddManager}},[e._v("添加管理员")])],1),a("el-table",{attrs:{data:e.salePersons,border:"","max-height":"510",align:"center","cell-style":{height:"38px",padding:0}}},e._l(e.table_column,(function(n,t){return a("el-table-column",{key:t,attrs:{prop:n.prop,label:n.label,align:"center",fixed:!!n.fixed&&n.fixed,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return["opts"==n.prop?a("div",{directives:[{name:"permission",rawName:"v-permission",value:{indentity:"bigflowChannelList-add"},expression:"{indentity:'bigflowChannelList-add'}"}]},[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.toEditManger(t.row,e.selectedChannelName)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.removeManager(t.row)}}},[e._v("删除")])],1):e._e(),"channelName"==n.prop?a("div",[a("span",[e._v(e._s(e.selectedChannelName))])]):a("div",[a("div",{domProps:{innerHTML:e._s(t.row[n.prop])}})])]}}],null,!0)})})),1)],1)],1)],1),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.showAddChannelDlg,width:"450px"},on:{"update:visible":function(n){e.showAddChannelDlg=n},close:e.hideAddChannelDlg}},[a("el-form",{attrs:{model:e.addChannelForm,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"渠道名称"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入渠道名称"},model:{value:e.addChannelForm.name,callback:function(n){e.$set(e.addChannelForm,"name",n)},expression:"addChannelForm.name"}})],1),a("el-form-item",{attrs:{label:"父渠道"}},[a("el-select",{attrs:{filterable:"",clearable:"","reserve-keyword":"",placeholder:"请输入父渠道"},model:{value:e.addChannelForm.parentId,callback:function(n){e.$set(e.addChannelForm,"parentId",n)},expression:"addChannelForm.parentId"}},e._l(e.channels,(function(e){return a("el-option",{key:e.channelId,attrs:{label:e.name,value:e.channelId}})})),1)],1),a("el-form-item",{staticClass:"queryFormItem",attrs:{label:"卡产品品类"}},[a("el-select",{staticClass:"queryFormInput",attrs:{clearable:"",placeholder:"请选择卡产品品类"},model:{value:e.productType,callback:function(n){e.productType=n},expression:"productType"}},e._l(e.productTypes,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.hideAddChannelDlg}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.okAddChannel}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.showEditChannelDlg,width:"450px"},on:{"update:visible":function(n){e.showEditChannelDlg=n},close:e.hideEditChannelDlg}},[a("el-form",{attrs:{model:e.editChannelForm,"label-width":"110px"}},[a("el-form-item",{staticClass:"queryFormItem",attrs:{label:"是否监控IMEI"}},[a("el-select",{staticClass:"queryFormInput",attrs:{clearable:"",placeholder:"请选择是否监控IMEI"},model:{value:e.editChannelForm.imeiSel,callback:function(n){e.$set(e.editChannelForm,"imeiSel",n)},expression:"editChannelForm.imeiSel"}},e._l(e.emeiSel,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),1==e.editChannelForm.imeiSel?a("el-form-item",{staticClass:"queryFormItem",attrs:{label:"IMEI监控类型"}},[a("el-select",{staticClass:"queryFormInput",attrs:{clearable:"",placeholder:"请选择IMEI监控类型"},model:{value:e.editChannelForm.emeiType,callback:function(n){e.$set(e.editChannelForm,"emeiType",n)},expression:"editChannelForm.emeiType"}},e._l(e.emeiTypes,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),0==e.editChannelForm.emeiType&&1==e.editChannelForm.imeiSel?a("el-form-item",{staticClass:"queryFormItem",attrs:{label:"IMEI白名单组"}},[a("el-select",{staticClass:"queryFormInput",attrs:{clearable:"",placeholder:"请选择IMEI白名单组"},model:{value:e.editChannelForm.imeiWhiteGroup,callback:function(n){e.$set(e.editChannelForm,"imeiWhiteGroup",n)},expression:"editChannelForm.imeiWhiteGroup"}},e._l(e.imeiWhiteGroups,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.value}})})),1)],1):e._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.hideEditChannelDlg}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.okEditChannel}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.addManagerDialogVisible,width:"430px"},on:{"update:visible":function(n){e.addManagerDialogVisible=n},close:e.closeChannelManagerButton}},[a("el-form",{ref:"addChannelRef",attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:"管理员手机号"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入管理员手机号"},model:{value:e.managerPhone,callback:function(n){e.managerPhone=n},expression:"managerPhone"}})],1),a("el-form-item",{attrs:{label:"管理员姓名"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入管理员姓名"},model:{value:e.manager,callback:function(n){e.manager=n},expression:"manager"}})],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入管理员密码"},model:{value:e.pwd,callback:function(n){e.pwd=n},expression:"pwd"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isUsingIn,expression:"isUsingIn"}],attrs:{label:"管理员角色",prop:"usingInDevice"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择管理员角色"},model:{value:e.roleId,callback:function(n){e.roleId=n},expression:"roleId"}},e._l(e.channelRoles,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeChannelManagerButton}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addManager}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"渠道邮箱",visible:e.mailConfigDialogVisible,width:"430px"},on:{"update:visible":function(n){e.mailConfigDialogVisible=n},close:e.closeMailConfigButton}},[a("el-form",{attrs:{model:e.mailConfigForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"邮箱地址"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入邮箱地址"},on:{blur:e.sendEmail},model:{value:e.mailConfigForm.address,callback:function(n){e.$set(e.mailConfigForm,"address",n)},expression:"mailConfigForm.address"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.hideMailConfigDlg}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.okModifyMailConfig}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改管理员",visible:e.editManagerDialogVisible,width:"430px"},on:{"update:visible":function(n){e.editManagerDialogVisible=n},close:e.closeEditManagerButton}},[a("el-form",{attrs:{model:e.editManager,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入姓名"},model:{value:e.editManager.name,callback:function(n){e.$set(e.editManager,"name",n)},expression:"editManager.name"}})],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入密码"},model:{value:e.editManager.pwd,callback:function(n){e.$set(e.editManager,"pwd",n)},expression:"editManager.pwd"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeEditManagerButton}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.okEditManager}},[e._v("确 定")])],1)],1),a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"el-loading",attrs:{"element-loading-background":"transparent","element-loading-text":"加载中"}})],1)},i=[],s=a("ade3"),o=(a("b0c0"),a("4de4"),a("d81d"),a("07ac"),a("a9e3"),a("2095")),r=a("5986"),d=a("5f02"),h=a("8593"),c={name:"channelList",components:{channelTree:o["a"]},data:function(){var e;return e={editManagerDialogVisible:!1,productType:"",mailConfigDialogVisible:!1,mailConfigForm:{address:"",id:""},mailCofings:[],imeiRules:[],showEditChannelDlg:!1,imeiWhiteGroups:[],addManagerDialogVisible:!1,managerPhone:"",manager:"",pwd:"",roleId:"",channels:[],showAddChannelDlg:!1,addChannelForm:{},salePersons:[],selecedChannelCode:null,selectedChannelName:null,channelRoles:[]},Object(s["a"])(e,"roleId",""),Object(s["a"])(e,"channelId",""),Object(s["a"])(e,"managerPhone",""),Object(s["a"])(e,"manager",""),Object(s["a"])(e,"pwd",""),Object(s["a"])(e,"channelList",[]),Object(s["a"])(e,"parentChannnelName",""),Object(s["a"])(e,"page",1),Object(s["a"])(e,"pageSize",10),Object(s["a"])(e,"total",0),Object(s["a"])(e,"table_mail_column",[{prop:"user_name",label:"邮箱地址",width:150},{prop:"opts",label:"操作",width:180}]),Object(s["a"])(e,"table_column",[{prop:"channelName",label:"渠道名称",width:150},{prop:"name",label:"姓名",width:150},{prop:"mobile",label:"登陆帐号",width:100},{prop:"mobile",label:"手机号",width:100},{prop:"type",label:"类型",width:50},{prop:"qrCode",label:"登录密码",width:100},{prop:"openId",label:"微信openId",width:100},{prop:"status",label:"状态",width:80},{prop:"opts",label:"操作",width:100}]),Object(s["a"])(e,"table_imei_column",[{prop:"channelName",label:"渠道名称",width:350},{prop:"imeiTypeName",label:"类型",width:200},{prop:"groupName",label:"监控组",width:100},{prop:"opts",label:"操作",width:180}]),Object(s["a"])(e,"queryChannelForm",{name:null,phone:null}),Object(s["a"])(e,"ChannelsQrcode",""),Object(s["a"])(e,"addDialogVisible",!1),Object(s["a"])(e,"addManagerDialogVisible",!1),Object(s["a"])(e,"dialogTitle","新增渠道"),Object(s["a"])(e,"productTypes",[{label:"大流量",value:0},{label:"钻石卡",value:1}]),Object(s["a"])(e,"usingInDeviceOptions",[{label:"是",value:1},{label:"否",value:0}]),Object(s["a"])(e,"usingInXuebakaOptions",[{label:"是",value:1},{label:"否",value:0}]),Object(s["a"])(e,"emeiSel",[{label:"是",value:1},{label:"否",value:0}]),Object(s["a"])(e,"emeiTypes",[{label:"黑名单",value:1},{label:"白名单",value:0}]),Object(s["a"])(e,"editChannelForm",{id:"",channelName:null,manager:null,managerPhone:null,parentChannelId:2,twoCodeEnable:!0,usingInXuebaka:1,usingInDevice:0,imeiSel:0,emeiType:1,imeiWhiteGroup:""}),Object(s["a"])(e,"addChannelForm",{channelName:null,manager:null,managerPhone:null,parentChannelId:2,twoCodeEnable:!0,usingInXuebaka:1,usingInDevice:0,imeiSel:0,emeiType:1}),Object(s["a"])(e,"addChannelRules",{channelName:[{required:!0,message:"请输入渠道名称",trigger:"blur"}],managerPhone:[{required:!0,message:"请输入联系人手机",trigger:"blur"}],manager:[{required:!0,message:"联系人名称",trigger:"blur"}],channelNo:[{required:!0,message:"请输入渠道编码",trigger:"blur"}]}),Object(s["a"])(e,"mineStatusValue",[]),Object(s["a"])(e,"isClearable",!0),Object(s["a"])(e,"isAccordion",!0),Object(s["a"])(e,"props",{value:"channelId",label:"channelName",children:"children"}),Object(s["a"])(e,"channelTreeList",[]),Object(s["a"])(e,"optionData",[]),Object(s["a"])(e,"loading",!1),Object(s["a"])(e,"isUsingIn",!0),Object(s["a"])(e,"selectedImeiConfigRow",[]),Object(s["a"])(e,"editManager",{managerId:"",name:"",pwd:""}),e},mounted:function(){this.getImeiGroups(),this.getChannelList(),this.getParentChannelOptions(),this.getChannelRoles(),this.getChannelTree()},methods:(t={closeEditManagerButton:function(){this.editManagerDialogVisible=!1},okEditManager:function(){var e=this;null!=this.editManager.name&&""!=this.editManager.name?null!=this.editManager.pwd&&""!=this.editManager.pwd?this.$confirm("您确认要此操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n=e.editManager;d["a"].modifyManger(n).then((function(n){0===n.resultCode?(e.getSalePerson(),e.$message.success("修改成功"),e.editManagerDialogVisible=!1):e.$message.error(n.resultInfo)}))})).catch((function(){})):this.$message.error("密码不能为空"):this.$message.error("姓名不能为空")},toEditManger:function(e){this.editManager.managerId=e.id,this.editManager.name=e.name,this.editManager.pwd=e.qrCode,this.editManagerDialogVisible=!0},removeManager:function(e){var n=this;this.$confirm("您确认要此操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=e.id,t={};t.managerId=a,t.channelId=n.selecedChannelCode,d["a"].removeManger(t).then((function(e){0===e.resultCode?(n.getSalePerson(),n.$message.success("删除成功")):n.$message.error(e.resultInfo)}))})).catch((function(){}))},sendEmail:function(){var e=/^(\w+([-.][A-Za-z0-9]+)*){3,18}@\w+([-.][A-Za-z0-9]+)*\.\w+([-.][A-Za-z0-9]+)*$/;""==this.mailConfigForm.address||e.test(this.mailConfigForm.address)||(this.$message({message:"邮箱格式不正确",type:"error"}),this.mailConfigForm.address="")},getSaleChannelMailConfig:function(){var e=this,n={};n.channelId=this.selecedChannelCode,d["a"].getSaleChannelMailConfig(n).then((function(n){0===n.resultCode?e.mailCofings=n.data:e.$message.error(n.resultInfo)}))},okRemoveMailConfig:function(e){var n=this;this.$confirm("您确认要此操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={};a.id=e.id,d["a"].removeSaleChannelMailConfig(a).then((function(e){0===e.resultCode?(n.$message.success("删除成功！"),n.getSaleChannelMailConfig()):n.$message.error(e.resultInfo)}))})).catch((function(){}))},okModifyMailConfig:function(){var e=this;void 0!=this.mailConfigForm.address&&""!=this.mailConfigForm.address&&null!=this.mailConfigForm.address?this.$confirm("您确认要此操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){if(""==e.mailConfigForm.id||void 0==e.mailConfigForm.id||null==e.mailConfigForm.id){var n={};n.channel_id=e.selecedChannelCode,n.user_name=e.mailConfigForm.address,d["a"].addSaleChannelMailConfig(n).then((function(n){0===n.resultCode?(e.$message.success("添加成功！"),e.getSaleChannelMailConfig(),e.mailConfigDialogVisible=!1):e.$message.error(n.resultInfo)}))}else{var a={};a.channel_id=e.selecedChannelCode,a.user_name=e.mailConfigForm.address,a.id=e.mailConfigForm.id,d["a"].modifySaleChannelMailConfig(a).then((function(n){0===n.resultCode?(e.$message.success("添加成功！"),e.getSaleChannelMailConfig(),e.mailConfigDialogVisible=!1):e.$message.error(n.resultInfo)}))}e.mailConfigForm.address="",e.mailConfigForm.id=""})).catch((function(){})):this.$message.error("邮箱地址必须填写")},showMailConfigDlg:function(e){null!=this.selecedChannelCode&&void 0!=this.selecedChannelCode&&""!=this.selecedChannelCode?(void 0!=e?(this.mailConfigForm.address=e.user_name,this.mailConfigForm.id=e.id):(this.mailConfigForm.address="",this.mailConfigForm.id=""),this.mailConfigDialogVisible=!0):this.$message.error("请先选择渠道")},hideMailConfigDlg:function(){this.mailConfigDialogVisible=!1},closeMailConfigButton:function(){},showAddImeiDlg:function(){if(null!=this.selecedChannelCode&&void 0!=this.selecedChannelCode&&""!=this.selecedChannelCode)if(null!=this.imeiRules&&this.imeiRules.length>0)this.$message.error("一个渠道只能设置一个规则");else{var e={};this.showEditChannelDlg=!0,e.channelId=this.selecedChannelCode,this.selectedImeiConfigRow=e}else this.$message.error("请先选择渠道")},showEditImeiDlg:function(e){this.showEditChannelDlg=!0,this.selectedImeiConfigRow=e},deleteImei:function(e){var n=this;this.$confirm("您确认要此操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={};a.channelId=e.channelId,d["a"].removeChannelImeiConfig(a).then((function(e){0===e.resultCode?(n.$message.success("删除成功！"),n.getChannelImeiConfig()):n.$message.error(e.resultInfo)}))})).catch((function(){}))},editImeiConfig:function(e){var n=this;this.$confirm("您确认要此操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e={};e.emeiType=n.editChannelForm.emeiType,e.imeiWhiteGroupId=n.editChannelForm.imeiWhiteGroup,e.channelId=n.selectedImeiConfigRow.channelId,d["a"].modifyChannel(e).then((function(e){0===e.resultCode?(n.$message.success("修改成功！"),n.hideEditChannelDlg()):n.$message.error(e.resultInfo)}))})).catch((function(){}))},showEditChannel:function(e,n){this.editChannelForm.name=n,this.showEditChannelDlg=!0},hideEditChannelDlg:function(){this.showEditChannelDlg=!1},addManager:function(){var e=this;null!=this.selecedChannelCode&&void 0!=this.selecedChannelCode&&""!=this.selecedChannelCode?null!=this.manager&&void 0!=this.manager&&""!=this.manager?null!=this.managerPhone&&void 0!=this.managerPhone&&""!=this.managerPhone?null!=this.pwd&&void 0!=this.pwd&&""!=this.pwd?null!=this.roleId&&void 0!=this.roleId&&""!=this.roleId?this.$confirm("您确认要此操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n={};n.name=e.manager,n.phone=e.managerPhone,n.pwd=e.pwd,n.saleChannelId=e.selecedChannelCode,n.roleId=e.roleId,d["a"].addSaleChannelManager(n).then((function(n){0===n.resultCode?(e.$message.success("添加成功！"),e.addManagerDialogVisible=!1,e.getSalePerson()):e.$message.error(n.resultInfo)}))})).catch((function(){})):this.$message.success("管理员角色不能为空"):this.$message.success("管理员登录密码不能为空"):this.$message.success("管理员手机号不能为空"):this.$message.success("管理员姓名不能为空"):this.$message.success("渠道不能为空")},closeChannelManagerButton:function(){this.addManagerDialogVisible=!1},showAddManager:function(){this.addManagerDialogVisible=!0},getChannelTree:function(){var e=this,n={page:1};d["a"].getSaleChannels(n).then((function(n){0===n.resultCode?e.channels=n.data:e.$message.error(n.resultInfo)}))},hideAddChannelDlg:function(){this.showAddChannelDlg=!1},okEditChannel:function(){var e=this;this.$confirm("您确认要此操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n={};n.name=e.editChannelForm.name,n.emeiType=e.editChannelForm.emeiType,n.imeiWhiteGroupId=e.editChannelForm.imeiWhiteGroup,n.channelId=e.selectedImeiConfigRow.channelId,d["a"].modifyChannel(n).then((function(n){0===n.resultCode?(e.$message.success("添加成功！"),e.hideEditChannelDlg(),e.getChannelImeiConfig()):e.$message.error(n.resultInfo)}))})).catch((function(){}))},okAddChannel:function(){var e=this;void 0!=this.addChannelForm.name&&""!=this.addChannelForm.name&&null!=this.addChannelForm.name?(void 0!=this.addChannelForm.parentId&&""!=this.addChannelForm.parentId&&null!=this.addChannelForm.parentId||(this.addChannelForm.parentId="-1"),this.addChannelForm.salePerson="aa",void 0!=this.addChannelForm.salePerson&&""!=this.addChannelForm.salePerson&&null!=this.addChannelForm.salePerson?(this.addChannelForm.phone="55",void 0!=this.addChannelForm.phone&&""!=this.addChannelForm.phone&&null!=this.addChannelForm.phone?(this.addChannelForm.pwd="55",void 0!=this.addChannelForm.pwd&&""!=this.addChannelForm.pwd&&null!=this.addChannelForm.pwd?this.$confirm("您确认要此操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n={};n.name=e.addChannelForm.name,n.parentId=e.addChannelForm.parentId,n.contactMobile=e.addChannelForm.phone,n.contactName=e.addChannelForm.salePerson,n.password=e.addChannelForm.pwd,n.productType=e.productType,n.channelId=localStorage.getItem("channelId"),d["a"].addSaleChannel(n).then((function(n){0===n.resultCode?(e.$message.success("添加成功！"),e.$refs.channerTreeRef.getChannelTree(),e.hideAddChannelDlg()):e.$message.error(n.resultInfo)}))})).catch((function(){})):this.$message.error("登录密码必须填写")):this.$message.error("联系人电话必须填写")):this.$message.error("联系人姓名必须填写")):this.$message.error("渠道名必须填写")},showAddChannel:function(){this.showAddChannelDlg=!0},getChannelImeiConfig:function(){var e=this,n={};n.channelId=this.selecedChannelCode,d["a"].getChannelImeiConfig(n).then((function(n){0===n.resultCode?e.imeiRules=n.data:e.$message.error("查询失败")}))},getImeiGroups:function(){var e=this,n={};d["a"].getImeiGroups(n).then((function(n){0===n.resultCode?e.imeiWhiteGroups=n.data:e.$message.error("查询失败")}))},getSalePerson:function(){var e=this,n={qtype:"channel",page:1};n.saleChannel=this.selecedChannelCode,d["a"].getSalePersons(n).then((function(n){0===n.resultCode?e.salePersons=n.data:e.$message.error("查询失败")}))},getChannelRoles:function(){var e=this,n={};h["a"].getAllSysRoles(n).then((function(n){if(0===n.resultCode){var a=n.data;e.channelRoles=a.filter((function(e){return 2===e.type}))}else e.$message.error("获取公众号二维码失败: 获取不到accesstoken")}))},channelChick:function(e){},getChannelId:function(e,n){this.selecedChannelCode=e,this.selectedChannelName=n,this.getSalePerson(),this.getChannelImeiConfig(),this.getSaleChannelMailConfig()},getChannelList:function(e){if(e){var n={parentChannel:e};this.apiChannelsList(n)}else{var a={parentChannel:1};this.apiChannelsList(a)}},ChannelsQrcodeAdd:function(e){var n=this,a={channelId:e};r["a"].apiChannelsQrcode(a).then((function(e){0===e.resultCode?n.ChannelsQrcode=e.data:n.$message.error("获取公众号二维码失败: 获取不到accesstoken")}))},apiChannelsList:function(e){var n=this,a=this.queryChannelForm,t=Object.assign(a,e);this.loading=!0,r["a"].apiChannelsList(t).then((function(e){0===e.resultCode?(n.channelList=e.data,n.total=e.rowNum,n.loading=!1):n.$message.error(e.resultInfo)}))},handleSizeChange:function(e){this.queryChannelForm.pageSize=e,this.getChannelList(localStorage.getItem("channelId"))},handleCurrentChange:function(e){this.queryChannelForm.page=e-1,this.getChannelList(localStorage.getItem("channelId"))},queryChannelButton:function(){""===this.queryChannelForm.channelId&&(this.queryChannelForm.channelId=null),""===this.queryChannelForm.channelName&&(this.queryChannelForm.channelName=null),""===this.queryChannelForm.endDate&&(this.queryChannelForm.endDate=null),""===this.queryChannelForm.manager&&(this.queryChannelForm.manager=null),""===this.queryChannelForm.startDate&&(this.queryChannelForm.startDate=null),this.getChannelList(localStorage.getItem("channelId"))},getValue:function(e){this.addChannelForm.parentChannelId=e},getManagerChannelId:function(e){this.channelId=e},getParentChannelOptions:function(){var e=this;r["a"].apiChannelsAllList().then((function(n){if(0===n.resultCode){e.channelTreeList=Object.values(n.data).map((function(e){return{channelId:e.channelId,channelName:e.channelName,manager:e.manager,parentChannelId:e.parentChannelId}}));for(var a=JSON.parse(JSON.stringify(e.channelTreeList)),t=[],l={},i=0,s=0,o=a.length;i<o;i++)l[a[i]["channelId"]]=a[i];for(;s<o;s++){var r=a[s],d=l[r["parentChannelId"]];d?(d["children"]||(d["children"]=[]),d["children"].push(r)):t.push(r)}e.optionData=t}else e.$message.error(n.resultInfo)}))},addChannelShow:function(){this.addDialogVisible=!0,this.dialogTitle="新增渠道",this.addChannelForm.channelId=null,this.isUsingIn=!0},addChannelManagerShow:function(){this.addManagerDialogVisible=!0,this.dialogTitle="新增渠道管理员"},removeChannel:function(){var e=this;this.$confirm("您确认要此操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n={};n.channelId=localStorage.getItem("channelId"),r["a"].apiRemoveChannel(n).then((function(n){0===n.resultCode?(e.$message.success("删除成功！"),e.$refs.channerTreeRef.getChannelTree()):e.$message.error(n.resultInfo)}))})).catch((function(){}))}},Object(s["a"])(t,"closeChannelManagerButton",(function(){this.addManagerDialogVisible=!1})),Object(s["a"])(t,"addChannelManagerButton",(function(){var e=this,n=this;this.$confirm("您确认要此操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={};a.channelId=e.channelId,a.userName=e.managerPhone,a.name=e.manager,a.type=1,a.phone=e.managerPhone,a.pwd=e.pwd,a.roleId=e.roleId,r["a"].apiAddChannelManager(a).then((function(a){0===a.resultCode?(e.$message.success("新增成功！"),n.addManagerDialogVisible=!1,n.getChannelList(localStorage.getItem("channelId"))):e.$message.error(a.resultInfo)}))})).catch((function(){}))})),Object(s["a"])(t,"usingInDeviceChange",(function(e){this.addChannelForm.usingInXuebaka=0===e?1:0})),Object(s["a"])(t,"usingInXuebakaChange",(function(e){this.addChannelForm.usingInDevice=0===e?1:0})),Object(s["a"])(t,"closeButton",(function(){this.addDialogVisible=!1,this.$refs.addChannelRef.resetFields(),this.addChannelForm.channelId=null,this.addChannelForm.channelName=null,this.addChannelForm.parentChannelId=null,this.addChannelForm.managerPhone=null,this.addChannelForm.manager=null,this.addChannelForm.usingInDevice=null,this.addChannelForm.usingInXuebaka=null})),Object(s["a"])(t,"addDialogClosed",(function(){this.$refs.addChannelRef.resetFields(),this.addChannelForm.channelId=null,this.addChannelForm.channelName=null,this.addChannelForm.parentChannelId=null,this.addChannelForm.managerPhone=null,this.addChannelForm.manager=null,this.addChannelForm.usingInDevice=null,this.addChannelForm.usingInXuebaka=null})),Object(s["a"])(t,"addUser",(function(){var e=this;this.$refs.addChannelRef.validate((function(n){if(n)if(e.addChannelForm.channelId){var a={channelId:e.addChannelForm.channelId,channelName:e.addChannelForm.channelName,manager:e.addChannelForm.manager,managerPhone:e.addChannelForm.managerPhone,parentChannelId:Number(e.addChannelForm.parentChannelId),twoCodeEnable:e.addChannelForm.twoCodeEnable};r["a"].apiChannelsModify(a).then((function(n){0===n.resultCode?(e.$message.success("编辑成功！"),e.getChannelList(localStorage.getItem("channelId")),e.getParentChannelOptions(),e.$refs.channerTreeRef.getChannelTree(),e.addDialogVisible=!1,e.$refs.addChannelRef.resetFields()):e.$message.error(n.resultInfo)}))}else{var t={channelName:e.addChannelForm.channelName,manager:e.addChannelForm.manager,managerPhone:e.addChannelForm.managerPhone,parentChannelId:Number(e.addChannelForm.parentChannelId),twoCodeEnable:e.addChannelForm.twoCodeEnable,usingInDevice:e.addChannelForm.usingInDevice,usingInXuebaka:e.addChannelForm.usingInXuebaka};e.addChannelListSuccess(JSON.stringify(t))}}))})),Object(s["a"])(t,"addChannelListSuccess",(function(e){var n=this;r["a"].apiChannelsAdd(e).then((function(e){0===e.resultCode?(n.$message.success("添加成功！"),n.getChannelList(localStorage.getItem("channelId")),n.getParentChannelOptions(),n.$refs.channerTreeRef.getChannelTree(),n.addDialogVisible=!1,n.$refs.addChannelRef.resetFields()):n.$message.error(e.resultInfo)}))})),Object(s["a"])(t,"channelEdit",(function(e){this.addDialogVisible=!0,this.dialogTitle="编辑渠道",this.addChannelForm.channelId=e.channelId,this.addChannelForm.channelName=e.channelName,this.addChannelForm.parentChannelId=e.parentChannelId,this.addChannelForm.managerPhone=e.managerPhone,this.addChannelForm.manager=e.manager,this.isUsingIn=!1,0===e.twoCodeEnable?this.addChannelForm.twoCodeEnable=!1:this.addChannelForm.twoCodeEnable=!0})),Object(s["a"])(t,"deactivation",(function(e,n){var a=this;this.$confirm("您确认要此操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={channelId:e.channelId,status:n};r["a"].apiChannelsStatusModify(t).then((function(e){0===e.resultCode?(a.$message.success("停用成功！"),a.getChannelList(localStorage.getItem("channelId"))):a.$message.error(e.resultInfo)}))})).catch((function(){}))})),Object(s["a"])(t,"channelDetail",(function(e,n){var a=n.channelId;localStorage.setItem("channelId",a),this.$router.push({path:"channelDetail",query:{channelId:a}})})),t)},u=c,m=(a("48c0"),a("2877")),g=Object(m["a"])(u,l,i,!1,null,"e30b7626",null);n["default"]=g.exports}}]);
//# sourceMappingURL=chunk-39651e25.f230245e.js.map