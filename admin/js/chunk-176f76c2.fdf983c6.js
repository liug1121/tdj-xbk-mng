(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-176f76c2"],{"159b":function(e,t,n){var a=n("da84"),o=n("fdbc"),r=n("17c2"),l=n("9112");for(var i in o){var s=a[i],c=s&&s.prototype;if(c&&c.forEach!==r)try{l(c,"forEach",r)}catch(u){c.forEach=r}}},"17c2":function(e,t,n){"use strict";var a=n("b727").forEach,o=n("a640"),r=o("forEach");e.exports=r?[].forEach:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}},"25b4":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"box_subject"},[n("el-card",{staticClass:"all_list"},[n("el-form",{attrs:{inline:!0}}),n("div",{staticClass:"cardNos"},[n("div",{staticClass:"cardNosList"}),n("div",{staticClass:"cardNosNumber"},[e._v("选中"),n("span",{staticClass:"red"},[e._v("0")]),e._v("条数据")])]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.managers,border:"","max-height":"600",align:"center","cell-style":{height:"38px",padding:0}},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._l(e.table_column,(function(t,a){return n("el-table-column",{key:a,attrs:{prop:t.prop,label:t.label,width:t.width,align:"center",fixed:!!t.fixed&&t.fixed,sortable:t.sortable},scopedSlots:e._u([{key:"default",fn:function(a){return[n("div",{domProps:{innerHTML:e._s(a.row[t.prop])}}),"operations"==t.prop?n("div",[n("el-button",{attrs:{size:"mini",type:"warning",plain:""},on:{click:function(t){return e.editManager(a.row,0)}}},[e._v("编辑")]),n("el-button",{attrs:{size:"mini",type:"warning",plain:""},on:{click:function(t){return e.roleSel(a.row)}}},[e._v("分配角色")])],1):e._e()]}}],null,!0)})}))],2)],1),n("el-dialog",{attrs:{title:"用户信息",visible:e.managerDlgShow,width:"430px"},on:{"update:visible":function(t){e.managerDlgShow=t},close:e.managerDlgClose}},[n("el-form",{attrs:{"label-width":"120px"}},[n("el-form-item",{attrs:{label:"登录名"}},[n("el-input",{attrs:{size:"small",placeholder:"请输入登录名"},model:{value:e.manager2Edit.user_name,callback:function(t){e.$set(e.manager2Edit,"user_name",t)},expression:"manager2Edit.user_name"}})],1),n("el-form-item",{attrs:{label:"用户名"}},[n("el-input",{attrs:{size:"small",placeholder:"请输入用户名"},model:{value:e.manager2Edit.name,callback:function(t){e.$set(e.manager2Edit,"name",t)},expression:"manager2Edit.name"}})],1),n("el-form-item",{attrs:{label:"登录密码"}},[n("el-input",{attrs:{size:"small",placeholder:"请输入登录密码"},model:{value:e.manager2Edit.pwd,callback:function(t){e.$set(e.manager2Edit,"pwd",t)},expression:"manager2Edit.pwd"}})],1),n("el-form-item",{attrs:{label:"电话"}},[n("el-input",{attrs:{size:"small",placeholder:"请输入电话"},model:{value:e.manager2Edit.phone,callback:function(t){e.$set(e.manager2Edit,"phone",t)},expression:"manager2Edit.phone"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.managerDlgClose}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.managerDlgOk}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"角色信息",visible:e.roleDlgShow,width:"430px"},on:{"update:visible":function(t){e.roleDlgShow=t}}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"roleSelTable",attrs:{data:e.roles,border:"","max-height":"600",align:"center","cell-style":{height:"38px",padding:0}},on:{"selection-change":e.handleRoleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._l(e.role_table_column,(function(t,a){return n("el-table-column",{key:a,attrs:{prop:t.prop,label:t.label,width:t.width,align:"center",fixed:!!t.fixed&&t.fixed,sortable:t.sortable},scopedSlots:e._u([{key:"default",fn:function(a){return[n("div",{domProps:{innerHTML:e._s(a.row[t.prop])}})]}}],null,!0)})}))],2),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.roleSelDlgClose}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.roleSelDlgOk}},[e._v("确 定")])],1)],1)],1)},o=[],r=(n("159b"),n("b0c0"),n("8593")),l={components:{},data:function(){return{loading:!1,managers:[],roles:[],managerDlgShow:!1,roleDlgShow:!1,manager2Edit:{},managerRoles2Modify:[],selectedManager:{},page:1,pageSize:10,total:0,table_column:[{prop:"user_name",label:"登录名",width:200,fixed:"left"},{prop:"name",label:"用户名",width:300},{prop:"phone",label:"电话",width:300},{prop:"roleInfo",label:"角色",width:300},{prop:"operations",label:"操作",width:300}],role_table_column:[{prop:"roleName",label:"角色名称",width:300}]}},mounted:function(){},created:function(){this.queryAllManagers()},watch:{},updated:function(){this.refreshRolesSelected()},toggleSelection:function(e){},methods:{refreshRolesSelected:function(){var e=this;this.roles.forEach((function(t){1==t.has&&e.$refs.roleSelTable.toggleRowSelection(t,!0)}))},getManagerRoles:function(e){var t=this;this.loading=!0;var n={};n.managerId=e,r["a"].getSysManagerRoles(n).then((function(e){0==e.resultCode&&(t.roles=e.data,t.loading=!1)}))},doEditManagerRoles:function(e,t,n){var a={};a.managerId=e;var o=[];this.managerRoles2Modify.forEach((function(e){o.push(e.roleId)})),a.roleIds=o,r["a"].editMangerRoles(a).then((function(e){0==e.resultCode?null!=t&&void 0!=t&&t(e):null!=n&&void 0!=n&&n(e)}))},doEditManager:function(e,t){var n={};n.id=this.manager2Edit.id,n.userName=this.manager2Edit.user_name,n.pwd=this.manager2Edit.pwd,n.name=this.manager2Edit.name,n.phone=this.manager2Edit.phone,r["a"].editManger(n).then((function(n){0==n.resultCode?null!=e&&void 0!=e&&e(n):null!=t&&void 0!=t&&t(n)}))},managerDlgOk:function(){var e=this;this.$confirm("您确认要此操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.doEditManager((function(t){e.managerDlgShow=!1,alert("修改成功")}),(function(e){alert("修改失败")}))})).catch((function(){}))},managerDlgClose:function(){this.managerDlgShow=!1},editManager:function(e,t){this.manager2Edit=e,this.managerDlgShow=!0},roleSel:function(e){this.roleDlgShow=!0,this.selectedManager=e,this.getManagerRoles(e.id)},roleSelDlgClose:function(){this.roleDlgShow=!1},roleSelDlgOk:function(){var e=this.selectedManager.id,t=this;this.$confirm("您确认要此操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.doEditManagerRoles(e,(function(e){t.roleDlgShow=!1,t.queryAllManagers(),alert("权限修改成功")}),(function(e){alert("权限修改失败")}))})).catch((function(){}))},handleSelectBranchCom:function(e){},queryAllManagers:function(){var e=this;this.loading=!0;var t={};r["a"].getAllSysManagers(t).then((function(t){0==t.resultCode&&(e.managers=t.data,e.total=t.rowNum,e.loading=!1)}))},handleSelectionChange:function(e){},handleRoleSelectionChange:function(e){this.managerRoles2Modify=e},handleSizeChange:function(e){this.page=e,this.queryAllManagers()},handleCurrentChange:function(e){this.page=e,this.queryAllManagers()}}},i=l,s=n("2877"),c=Object(s["a"])(i,a,o,!1,null,"5509fc7c",null);t["default"]=c.exports},"365c":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return l}));n("d3b7");var a=n("bc3a"),o=n.n(a);o.a.defaults.timeout=5e5,o.a.defaults.headers.post["Content-Type"]="application/json",o.a.interceptors.request.use((function(e){return e.headers.token=window.sessionStorage.getItem("token"),e}),(function(e){return Promise.reject(e)})),o.a.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));var r=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o.a.post(e,t,n).then((function(e){return e.data}))},l=function(e,t){return o.a.get(e,{params:t}).then((function(e){return e.data}))}},8593:function(e,t,n){"use strict";var a=n("365c");t["a"]={getAllSysFunctions:function(e){return a["a"]("boss/v1.0/system/functions",e)},getAllSysRoles:function(e){return a["a"]("boss/v1.0/system/roles",e)},getAllSysRoleFunctions:function(e){return a["a"]("boss/v1.0/system/roleFunctions",e)},getSysManagerRoles:function(e){return a["b"]("boss/v1.0/system/managerRoles",e)},getAllSysManagers:function(e){return a["a"]("boss/v1.0/system/managers",e)},editManger:function(e){return a["b"]("boss/v1.0/system/managers/edit",e)},editMangerRoles:function(e){return a["b"]("boss/v1.0/system/managerRoles/edit",e)},getRoleFunctions:function(e){return a["b"]("boss/v1.0/system/role/functions",e)},editRoleFunctions:function(e){return a["b"]("boss/v1.0/system/role/functions/modify",e)},addRole:function(e){return a["b"]("boss/v1.0/system/roles/add",e)},removeRole:function(e){return a["b"]("boss/v1.0/system/roles/remove",e)}}},a640:function(e,t,n){"use strict";var a=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&a((function(){n.call(null,t||function(){throw 1},1)}))}}}]);
//# sourceMappingURL=chunk-176f76c2.fdf983c6.js.map