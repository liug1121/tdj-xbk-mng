(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c03e604"],{"1a41":function(e,t,i){"use strict";i("2c75")},"2c75":function(e,t,i){},"365c":function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return r}));i("d3b7");var o=i("bc3a"),a=i.n(o);a.a.defaults.timeout=5e5,a.a.defaults.headers.post["Content-Type"]="application/json",a.a.interceptors.request.use((function(e){return e.headers.token=window.sessionStorage.getItem("token"),e}),(function(e){return Promise.reject(e)})),a.a.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));var s=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a.a.post(e,t,i).then((function(e){return e.data}))},r=function(e,t){return a.a.get(e,{params:t}).then((function(e){return e.data}))}},"3c65":function(e,t,i){"use strict";i("99af");var o=i("365c");t["a"]={apiProvincesList:function(e){return o["a"]("boss/v1.0/provinces",e)},apiPoisCitiesList:function(e){return o["b"]("boss/v1.0/pois/cities",e)},apiPoisDistrictsList:function(e){return o["b"]("boss/v1.0/pois/districts",e)},apiLbsAdd:function(e){return o["b"]("boss/v1.0/lbs/add",e)},apiLbsBlacks:function(e){return o["b"]("boss/v1.0/lbs/blacks",e)},apiLbsDetails:function(e){return o["b"]("boss/v1.0/lbs/card/details",e)},apiLbsDelete:function(e){return o["b"]("boss/v1.0/lbs/delete",e)},apiLbsDeleteGroup:function(e){return o["b"]("boss/v1.0/lbs/group/remove",e)},apiLbsGroupModify:function(e){return o["b"]("boss/v1.0/lbs/group/modify",e)},apiLbsGroupAdd:function(e){return o["b"]("boss/v1.0/lbs/group/add",e)},apiLbsGroupCardDetails:function(e){return o["b"]("boss/v1.0/lbs/group/card/details",e)},apiLbsGroupDetails:function(e){return o["b"]("boss/v1.0/lbs/group/details",e)},apiLbsGroupStatusModify:function(e){return o["b"]("boss/v1.0/lbs/group/status/modify",e)},apiLbsGroups:function(e){return o["b"]("boss/v1.0/lbs/groups",e)},apiLbsModify:function(e){return o["b"]("boss/v1.0/lbs/modify",e)},apiLbsStatusModify:function(e){return o["b"]("boss/v1.0/lbs/status/modify",e)},apiGroupCards:function(e){return o["b"]("boss/v1.0/lbs/group/cards",e)},apiCardScanPools:function(e){return o["a"]("boss/v1.0/card/scan/pool/all",e)},apiAddCardScanPool:function(e){return o["b"]("boss/v1.0/card/scan/pool/add",e)},apiRemoveCardScanPool:function(e){return o["b"]("boss/v1.0/card/scan/pool/delete",e)},apiCardScanPoolImeis:function(e){return o["b"]("boss/v1.0/card/scan/pool/details",e)},apiRemoveCardScanPoolImei:function(e){return o["b"]("boss/v1.0/card/scan/pool/details/delete",e)},apiImportPoolImeisUpload:function(e,t){return o["b"]("boss/v1.0/card/scan/pool/detail/upload",e,{headers:{"content-type":"multipart/form-data"}})},apiLbsGroupCardDownload:function(e,t){var i=e,a=t;return o["a"]("boss/v1.0/lbs/group/card/download/".concat(i,"/").concat(a))},apiLbsCardsUpload:function(e,t){return o["b"]("boss/v1.0/lbs/card/import",e,{headers:{"content-type":"multipart/form-data"}})},apiLbsGroupCardUpload:function(e){return o["b"]("boss/v1.0/lbs/group/card/upload",e,{headers:{"content-type":"multipart/form-data"}})},apiLBSDownload:function(e){var t=e.iccid,i=e.channelId,a=e.startTime,s=e.endTime,r=e.provinceId,l=e.cityId,n=e.lbsStatus;return o["a"]("boss/v1.0/lbs/card/download?iccid=".concat(t,"&channelId=").concat(i,"&startTime=").concat(a,"&endTime=").concat(s,"&provinceId=").concat(r,"&cityId=").concat(l,"&lbsStatus=").concat(n))}}},"4d7f":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"box_subject"},[i("el-card",{staticClass:"all_list"},[i("el-form",{ref:"queryBlacklistFormRef",attrs:{inline:!0,model:e.queryBlacklistFormModel}},[i("el-form-item",{staticClass:"queryFormItem",attrs:{label:"省份"}},[i("el-select",{staticClass:"queryFormInput",attrs:{filterable:"",clearable:"",placeholder:"请输入省份"},on:{change:e.provinceChange},model:{value:e.queryBlacklistFormModel.provinceId,callback:function(t){e.$set(e.queryBlacklistFormModel,"provinceId",t)},expression:"queryBlacklistFormModel.provinceId"}},e._l(e.provinceOptions,(function(e){return i("el-option",{key:e.provinceId,attrs:{label:e.provinceName,value:e.provinceId}})})),1)],1),i("el-form-item",{staticClass:"queryFormItem",attrs:{label:"城市"}},[i("el-select",{staticClass:"queryFormInput",attrs:{filterable:"",clearable:"",placeholder:"请输入城市名"},model:{value:e.queryBlacklistFormModel.cityId,callback:function(t){e.$set(e.queryBlacklistFormModel,"cityId",t)},expression:"queryBlacklistFormModel.cityId"}},e._l(e.PoisCitiesList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),i("el-form-item",{staticClass:"queryFormItem",attrs:{label:"频率(小时)"}},[i("el-input",{staticClass:"queryFormInput",attrs:{clearable:"",placeholder:"请输入定位频率"},model:{value:e.queryBlacklistFormModel.lbsRate,callback:function(t){e.$set(e.queryBlacklistFormModel,"lbsRate",e._n(t))},expression:"queryBlacklistFormModel.lbsRate"}})],1),i("el-form-item",{staticClass:"queryFormItem",attrs:{label:"动作"}},[i("el-select",{staticClass:"queryFormInput",attrs:{clearable:"",placeholder:"请选择动作"},model:{value:e.queryBlacklistFormModel.doType,callback:function(t){e.$set(e.queryBlacklistFormModel,"doType",t)},expression:"queryBlacklistFormModel.doType"}},e._l(e.strategyOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",{staticClass:"queryFormItem"},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.queryBlackButton}},[e._v("查询")])],1)],1),i("div",{staticClass:"button_content"},[i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:{indentity:"xbkBlackListRecordList-add"},expression:"{indentity:'xbkBlackListRecordList-add'}"}],attrs:{size:"medium",type:"primary",icon:"el-icon-plus"},on:{click:e.addBlackShow}},[e._v("新增")])],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.blacklist,border:"","max-height":"510px",align:"center","cell-style":{height:"38px",padding:0}}},e._l(e.table_column,(function(t,o){return i("el-table-column",{key:o,attrs:{prop:t.prop,label:t.label,width:t.width,align:"center",fixed:!!t.fixed&&t.fixed},scopedSlots:e._u([{key:"default",fn:function(o){return["statusCL"==t.prop?i("div",[0==o.row.status?i("span",[e._v("停用")]):1==o.row.status?i("span",[e._v("启用")]):e._e()]):e._e(),"doTypeCL"==t.prop?i("div",[1==o.row.doType?i("span",[e._v("监控")]):2==o.row.doType?i("span",[e._v("关停")]):3==o.row.doType?i("span",[e._v("限速")]):e._e()]):e._e(),"operation"==t.prop?i("div",[i("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.BlackEdit(o.row)}}},[e._v("编辑")]),1==o.row.status?i("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(t){return e.deactivation(o.row,0)}}},[e._v("停用")]):e._e(),0==o.row.status?i("el-button",{attrs:{size:"mini",type:"warning",plain:""},on:{click:function(t){return e.deactivation(o.row,1)}}},[e._v("启用")]):e._e(),i("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(t){return e.pushDel(o.row)}}},[e._v("删除")])],1):i("div",[i("div",{domProps:{innerHTML:e._s(o.row[t.prop])}})])]}}],null,!0)})})),1),i("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[10,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),i("el-dialog",{attrs:{title:e.dialogTitle,visible:e.addDialogVisible,width:"430px"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClosed}},[i("el-form",{ref:"addFormRef",attrs:{model:e.addForm,"label-width":"90px"}},[i("el-form-item",{attrs:{label:"省份"}},[i("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择省份"},on:{change:e.provinceChange},model:{value:e.addForm.provinceId,callback:function(t){e.$set(e.addForm,"provinceId",t)},expression:"addForm.provinceId"}},e._l(e.provinceOptions,(function(e){return i("el-option",{key:e.provinceId,attrs:{label:e.provinceName,value:e.provinceId}})})),1)],1),i("el-form-item",{attrs:{label:"城市"}},[i("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择城市名"},on:{change:e.cityChange},model:{value:e.addForm.cityId,callback:function(t){e.$set(e.addForm,"cityId",t)},expression:"addForm.cityId"}},e._l(e.PoisCitiesList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:"区县"}},[i("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择城市名"},model:{value:e.addForm.districtId,callback:function(t){e.$set(e.addForm,"districtId",t)},expression:"addForm.districtId"}},e._l(e.PoisDistrictsList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:"频率(小时)"}},[i("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入定位频率"},model:{value:e.addForm.lbsRate,callback:function(t){e.$set(e.addForm,"lbsRate",e._n(t))},expression:"addForm.lbsRate"}})],1),i("el-form-item",{attrs:{label:"动作"}},[i("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择动作"},model:{value:e.addForm.doType,callback:function(t){e.$set(e.addForm,"doType",t)},expression:"addForm.doType"}},e._l(e.strategyOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")])],1)],1)],1)],1)},a=[],s=(i("7db0"),i("3c65")),r={components:{},data:function(){return{blacklist:[],page:1,pageSize:10,total:0,table_column:[{prop:"province",label:"省份",width:150},{prop:"city",label:"城市",width:180},{prop:"districtName",label:"区县",width:180},{prop:"doTypeCL",label:"动作",width:80},{prop:"lbsRate",label:"定位频率",width:80},{prop:"createTime",label:"创建时间"},{prop:"statusCL",label:"状态",width:80},{prop:"operation",label:"操作",width:220}],strategyOptions:[{label:"监控",value:1},{label:"关停",value:2},{label:"限速",value:3}],provinceOptions:[],PoisCitiesList:[],PoisDistrictsList:[],queryBlacklistFormModel:{cityId:null,doType:null,lbsRate:null,provinceId:null,page:0,pageSize:10},addDialogVisible:!1,dialogTitle:null,addForm:{cityId:"",doType:"",lbsRate:"",provinceId:""},loading:!1}},mounted:function(){this.getBlacklist(),this.getprovinceOptions()},methods:{getBlacklist:function(){var e=this,t=this.queryBlacklistFormModel;this.loading=!0,s["a"].apiLbsBlacks(t).then((function(t){0===t.resultCode?(e.blacklist=t.data,e.total=t.rowNum,e.loading=!1):e.$message.error(t.resultInfo)}))},handleSizeChange:function(e){this.queryBlacklistFormModel.pageSize=e,this.getBlacklist()},handleCurrentChange:function(e){this.queryBlacklistFormModel.page=e-1,this.getBlacklist()},queryBlackButton:function(){""===this.queryBlacklistFormModel.cityId&&(this.queryBlacklistFormModel.cityId=null),""===this.queryBlacklistFormModel.doType&&(this.queryBlacklistFormModel.doType=null),""===this.queryBlacklistFormModel.lbsRate&&(this.queryBlacklistFormModel.lbsRate=null),""===this.queryBlacklistFormModel.provinceId&&(this.queryBlacklistFormModel.provinceId=null),this.getBlacklist()},getprovinceOptions:function(){var e=this;s["a"].apiProvincesList().then((function(t){if(0===t.resultCode){e.provinceOptions=t.data;var i=e.provinceOptions[0].provinceId;e.getPoisCitiesList(i)}else e.$message.error(t.resultInfo)}))},cityChange:function(e){this.getPoisDistrictsList(e)},provinceChange:function(e){var t={};t=this.provinceOptions.find((function(t){return t.provinceId===e})),this.getPoisCitiesList(t.provinceId)},getPoisCitiesList:function(e){var t=this,i={provinceId:e};s["a"].apiPoisCitiesList(i).then((function(e){0===e.resultCode?t.PoisCitiesList=e.data:t.$message.error(e.resultInfo)}))},getPoisDistrictsList:function(e){var t=this,i={cityId:e};s["a"].apiPoisDistrictsList(i).then((function(e){0===e.resultCode?t.PoisDistrictsList=e.data:t.$message.error(e.resultInfo)}))},addBlackShow:function(){this.addDialogVisible=!0,this.dialogTitle="新增",this.addForm.id=null},addDialogClosed:function(){this.$refs.addFormRef.resetFields()},BlackEdit:function(e){this.addDialogVisible=!0,this.dialogTitle="编辑",this.addForm.cityId=e.cityId,this.addForm.doType=e.doType,this.addForm.lbsRate=e.lbsRate,this.addForm.provinceId=e.provinceId,this.addForm.id=e.id,this.getPoisCitiesList(e.provinceId)},addUser:function(){var e=this;this.$refs.addFormRef.validate((function(t){if(t){var i=JSON.stringify(e.addForm);if(e.addForm.id){var o={id:e.addForm.id,cityId:e.addForm.cityId,doType:e.addForm.doType,lbsRate:e.addForm.lbsRate,provinceId:e.addForm.provinceId};s["a"].apiLbsModify(o).then((function(t){0===t.resultCode?(e.$message.success("编辑成功！"),e.getBlacklist(),e.addDialogVisible=!1,e.$refs.addFormRef.resetFields(),e.addForm.id=null):e.$message.error(t.resultInfo)}))}else s["a"].apiLbsAdd(i).then((function(t){0===t.resultCode?(e.$message.success("添加成功！"),e.getBlacklist(),e.addDialogVisible=!1,e.$refs.addFormRef.resetFields()):e.$message.error(t.resultInfo)}))}}))},deactivation:function(e,t){var i=this,o={id:e.id,status:t};s["a"].apiLbsStatusModify(o).then((function(e){0===e.resultCode?(i.$message.success("操作成功！"),i.getBlacklist()):i.$message.error(e.resultInfo)}))},pushDel:function(e){var t=this,i={id:e.id};s["a"].apiLbsDelete(i).then((function(e){0===e.resultCode?(t.$message.success("删除成功！"),t.getBlacklist()):t.$message.error(e.resultInfo)}))}}},l=r,n=(i("1a41"),i("2877")),d=Object(n["a"])(l,o,a,!1,null,"129e0874",null);t["default"]=d.exports},"7db0":function(e,t,i){"use strict";var o=i("23e7"),a=i("b727").find,s=i("44d2"),r="find",l=!0;r in[]&&Array(1)[r]((function(){l=!1})),o({target:"Array",proto:!0,forced:l},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),s(r)}}]);
//# sourceMappingURL=chunk-1c03e604.81505077.js.map