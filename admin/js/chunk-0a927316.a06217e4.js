(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a927316"],{"365c":function(e,t,o){"use strict";o.d(t,"b",(function(){return l})),o.d(t,"a",(function(){return s}));o("d3b7");var a=o("bc3a"),r=o.n(a);r.a.defaults.timeout=5e5,r.a.defaults.headers.post["Content-Type"]="application/json",r.a.interceptors.request.use((function(e){return e.headers.token=window.sessionStorage.getItem("token"),e}),(function(e){return Promise.reject(e)})),r.a.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));var l=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.a.post(e,t,o).then((function(e){return e.data}))},s=function(e,t){return r.a.get(e,{params:t}).then((function(e){return e.data}))}},"59e6":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"box_subject"},[o("el-card",{staticClass:"all_list"},[o("el-form",{ref:"queryCardStockFormRef",attrs:{inline:!0,model:e.queryCardStockFormModel}},[o("el-form-item",{staticClass:"queryFormItem",attrs:{label:"卡号码"}},[o("el-input",{staticClass:"queryFormInput",staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"请输入卡号码"},model:{value:e.queryCardStockFormModel.cardNo,callback:function(t){e.$set(e.queryCardStockFormModel,"cardNo",t)},expression:"queryCardStockFormModel.cardNo"}})],1),o("el-form-item",{staticClass:"queryFormItem",attrs:{label:"ICCID"}},[o("el-input",{staticClass:"queryFormInput",staticStyle:{width:"210px"},attrs:{clearable:"",placeholder:"请输入ICCID"},model:{value:e.queryCardStockFormModel.iccid,callback:function(t){e.$set(e.queryCardStockFormModel,"iccid",t)},expression:"queryCardStockFormModel.iccid"}})],1),o("el-form-item",{staticClass:"queryFormItem",attrs:{label:"档位"}},[o("el-select",{staticClass:"queryFormInput",attrs:{clearable:"",placeholder:"请选择档位"},model:{value:e.queryCardStockFormModel.level,callback:function(t){e.$set(e.queryCardStockFormModel,"level",t)},expression:"queryCardStockFormModel.level"}},e._l(e.gearPositionOptions,(function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),o("el-form-item",{staticClass:"queryFormItem",attrs:{label:"卡状态"}},[o("el-select",{staticClass:"queryFormInput",attrs:{clearable:"",placeholder:"请选择卡状态"},model:{value:e.queryCardStockFormModel.status,callback:function(t){e.$set(e.queryCardStockFormModel,"status",t)},expression:"queryCardStockFormModel.status"}},e._l(e.statusOptions,(function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),o("el-form-item",{staticClass:"queryFormItem",attrs:{label:"卡品类"}},[o("el-select",{staticClass:"queryFormInput",attrs:{clearable:"",placeholder:"请选择卡类型"},model:{value:e.queryCardStockFormModel.cardType,callback:function(t){e.$set(e.queryCardStockFormModel,"cardType",t)},expression:"queryCardStockFormModel.cardType"}},e._l(e.cardTypeOptions,(function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),o("el-form-item",{staticClass:"queryFormItem",attrs:{label:"入库时间"}},[o("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd"},on:{change:e.startTimeChange},model:{value:e.queryCardStockFormModel.stockInDate,callback:function(t){e.$set(e.queryCardStockFormModel,"stockInDate",t)},expression:"queryCardStockFormModel.stockInDate"}}),o("span",{staticClass:"time-line"},[e._v("-")]),o("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date",placeholder:"结束日期","value-format":"yyyy-MM-dd"},on:{change:e.endTimeChange},model:{value:e.queryCardStockFormModel.stockOutDate,callback:function(t){e.$set(e.queryCardStockFormModel,"stockOutDate",t)},expression:"queryCardStockFormModel.stockOutDate"}})],1),o("el-form-item",{staticClass:"queryFormItem"},[o("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.queryCardStock}},[e._v("查询")])],1)],1),o("div",{staticClass:"button_content"},[o("el-button",{directives:[{name:"permission",rawName:"v-permission",value:{indentity:"xbkCardStock-export"},expression:"{indentity:'xbkCardStock-export'}"}],attrs:{size:"medium",type:"primary",icon:"el-icon-download"},on:{click:e.exportCardStock}},[e._v("导出")]),o("el-button",{directives:[{name:"permission",rawName:"v-permission",value:{indentity:"xbkCardStock-import"},expression:"{indentity:'xbkCardStock-import'}"}],staticClass:"upload-btn",attrs:{slot:"trigger",size:"medium",icon:"el-icon-upload2",type:"primary"},on:{click:e.openImportModal},slot:"trigger"},[e._v("导入")])],1),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.cardStockList,border:"","max-height":"550px",align:"center","cell-style":{height:"38px",padding:0}}},e._l(e.table_column,(function(t,a){return o("el-table-column",{key:a,attrs:{prop:t.prop,label:t.label,width:t.width,align:"center",fixed:!!t.fixed&&t.fixed},scopedSlots:e._u([{key:"default",fn:function(a){return["storeNameCL"==t.prop?o("div",["null"===a.row.storeName?o("span",[e._v("-")]):o("span",[e._v(e._s(a.row.storeName))])]):e._e(),"statusCL"==t.prop?o("div",[1===a.row.status?o("div",[e._v("在用")]):e._e(),0===a.row.status?o("div",[e._v("可用")]):e._e(),50===a.row.status?o("div",[e._v("停用")]):e._e()]):e._e(),"operation"==t.prop?o("div",[50===a.row.status?o("el-button",{attrs:{size:"mini",type:"warning",plain:""},on:{click:function(t){return e.deactivation(a.row,0)}}},[e._v("启用")]):o("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(t){return e.deactivation(a.row,50)}}},[e._v("停用")])],1):o("div",[o("div",{domProps:{innerHTML:e._s(a.row[t.prop])}})])]}}],null,!0)})})),1),o("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[10,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),o("ImportModal",{ref:"ImportModal",attrs:{cardTypeOptions:e.cardTypeOptions,honeycombOptions:e.honeycombOptions},on:{ImportModalSuccess:e.ImportModalSuccess}})],1)],1)},r=[],l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:"文件导入",visible:e.dialogVisible,width:"412px","close-on-click-modal":!1,"destroy-on-close":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("el-form",{ref:"ImportForm",attrs:{model:e.ImportForm,rules:e.ImportRules,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"蜂窝平台账户",prop:"fwAccount"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"请输入蜂窝平台账户关键词"},on:{change:e.fwAccountChange},model:{value:e.ImportForm.fwAccount,callback:function(t){e.$set(e.ImportForm,"fwAccount",t)},expression:"ImportForm.fwAccount"}},e._l(e.honeycombOptions,(function(e){return o("el-option",{key:e.id,attrs:{label:e.account,value:e.id}})})),1)],1),o("el-form-item",{attrs:{label:"卡品类",prop:"cardType"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择卡类型"},model:{value:e.ImportForm.cardType,callback:function(t){e.$set(e.ImportForm,"cardType",t)},expression:"ImportForm.cardType"}},e._l(e.cardTypeOptions,(function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),o("el-form-item",{attrs:{label:"仓位"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择仓位"},on:{change:e.stockTypeChange},model:{value:e.ImportForm.stockType,callback:function(t){e.$set(e.ImportForm,"stockType",t)},expression:"ImportForm.stockType"}},e._l(e.storingLocationOptions,(function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),o("el-form",{ref:"ImportForm",attrs:{model:e.ImportForm,"label-width":"120px"}},[o("el-upload",{staticClass:"unload-demo",attrs:{accept:".xls, .xlsx",action:"#","file-list":e.fileList,"http-request":e.uploadFile}},[o("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1),o("div",{staticClass:"notice"},[o("p",[e._v("1、下载模板后，填写数据。ICCID、卡号为必须字段，卡号可以带86。")]),o("p",[e._v("2、如果数据存在则会报错，请注意。")]),o("p",[o("a",[e._v("下载模板文件")]),e._v(" 仅支持xlsx,xls格式的文件. ")])]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.uploadIt()}}},[e._v("确 定")])],1)],1)},s=[],i=(o("7db0"),{data:function(){return{storingLocationOptions:[{label:"天地杰",value:"1"},{label:"友众力",value:"2"}],dialogVisible:!1,ImportForm:{fwAccount:null,cardType:null,stockType:null,file:""},fileList:[],ImportRules:{fwAccount:[{required:!0,message:"请选择蜂窝平台账户",trigger:"change"}],cardType:[{required:!0,message:"请选择卡类型",trigger:"change"}]}}},props:["cardTypeOptions","honeycombOptions"],methods:{fwAccountChange:function(e){var t={};t=this.honeycombOptions.find((function(t){return t.id===e})),this.ImportForm.fwAccount=t.fwAccount,this.ImportForm.stockType=t.openCompanyDesc},stockTypeChange:function(e){var t={};t=this.storingLocationOptions.find((function(t){return t.value===e})),this.ImportForm.stockType=t.label},uploadFile:function(e){var t=this;t.file=e.file},uploadIt:function(){var e=this;this.$refs["ImportForm"].validate((function(t){if(t){var o=e;if(o.file){var a=new FormData;a.append("file",o.file);var r=e.ImportForm.cardType,l=e.ImportForm.fwAccount,s=e.ImportForm.stockType;e.$emit("ImportModalSuccess",r,l,s,a),e.dialogVisible=!1}else o.$message.error({message:"请选择文件"})}}))}}}),n=i,c=o("2877"),u=Object(c["a"])(n,l,s,!1,null,null,null),d=u.exports,p=(o("99af"),o("365c")),m={apiCardsStocks:function(e){return p["b"]("boss/v1.0/cards/stocks",e)},apiCardInfoDetail:function(e){return p["b"]("boss/v1.0/cards/stocks/import",e)},apiFwAccountList:function(e){return p["b"]("boss/v1.0/fw/accounts",e)},apiCardStatusModify:function(e){return p["b"]("boss/v1.0/cards/status/modify",e)},apiCardsUploadAdd:function(e,t,o,a){return p["b"]("boss/v1.0/cards/upload/add?cardType=".concat(e,"&fwAccount=").concat(t,"&stockType=").concat(o),a,{headers:{"content-type":"multipart/form-data"}})}},f={components:{ImportModal:d},data:function(){return{cardStockList:[],page:1,pageSize:10,total:0,table_column:[{prop:"cardNo",label:"卡号码",width:120,fixed:"left"},{prop:"iccid",label:"ICCID",width:180},{prop:"level",label:"档位",width:70},{prop:"fwAccount",label:"蜂窝平台账号"},{prop:"storeNameCL",label:"仓位名称",width:120},{prop:"cardProductTypeName",label:"卡品类",width:80},{prop:"statusCL",label:"卡状态",width:80},{prop:"area",label:"归属地",width:150},{prop:"stockInDate",label:"入库时间",width:220},{prop:"operation",label:"操作",width:130,fixed:"right"}],statusOptions:[{label:"可用",value:0},{label:"在用",value:1},{label:"已停用",value:50}],honeycombOptions:[],gearPositionOptions:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4}],cardTypeOptions:[{value:2,label:"消费电子级物联网卡_三合一"},{value:3,label:"消费电子级物联网卡_二合一"},{value:4,label:"消费电子级物联网卡_普通"},{value:5,label:"消费电子级物联网贴片卡"},{value:6,label:"车规级物联网贴片卡"},{value:7,label:"工业级物联网卡_普通"},{value:8,label:"工业级物联网贴片卡"},{value:9,label:"工业级物联网卡_Nano"},{value:10,label:"工业级物联网卡_Micro"}],queryCardStockFormModel:{cardNo:null,cardType:null,iccid:null,level:null,status:null,stockInDate:null,stockOutDate:null,page:0,pageSize:10},loading:!1}},mounted:function(){this.getCardStockList(),this.gethoneycombOptions()},methods:{getCardStockList:function(){var e=this,t=this.queryCardStockFormModel;this.loading=!0,m.apiCardsStocks(t).then((function(t){0===t.resultCode?(e.cardStockList=t.data,e.total=t.rowNum,e.loading=!1):e.$message.error(t.resultInfo)}))},handleSizeChange:function(e){this.queryCardStockFormModel.pageSize=e,this.getCardStockList()},handleCurrentChange:function(e){this.queryCardStockFormModel.page=e-1,this.getCardStockList()},startTimeChange:function(){this.queryCardStockFormModel.stockInDate="".concat(this.queryCardStockFormModel.stockInDate," 00:00:00")},endTimeChange:function(){this.queryCardStockFormModel.stockOutDate="".concat(this.queryCardStockFormModel.stockOutDate," 23:59:59")},queryCardStock:function(){""===this.queryCardStockFormModel.cardNo&&(this.queryCardStockFormModel.cardNo=null),""===this.queryCardStockFormModel.cardType&&(this.queryCardStockFormModel.cardType=null),""===this.queryCardStockFormModel.iccid&&(this.queryCardStockFormModel.iccid=null),""===this.queryCardStockFormModel.level&&(this.queryCardStockFormModel.level=null),""===this.queryCardStockFormModel.status&&(this.queryCardStockFormModel.status=null),""===this.queryCardStockFormModel.stockInDate&&(this.queryCardStockFormModel.stockInDate=null),""===this.queryCardStockFormModel.stockOutDate&&(this.queryCardStockFormModel.stockOutDate=null),this.getCardStockList()},gethoneycombOptions:function(){var e=this,t={page:0,pageSize:1e3};m.apiFwAccountList(t).then((function(t){0===t.resultCode?e.honeycombOptions=t.data:e.$message.error(t.resultInfo)}))},exportCardStock:function(){},deactivation:function(e,t){var o=this,a={iccid:e.iccid,status:t};m.apiCardStatusModify(a).then((function(e){0===e.resultCode?(o.$message.success("操作成功！"),o.getCardStockList()):o.$message.error(e.resultInfo)}))},openImportModal:function(){this.$refs.ImportModal.dialogVisible=!0},ImportModalSuccess:function(e,t,o,a){var r=this;m.apiCardsUploadAdd(e,t,o,a).then((function(e){0===e.resultCode?(r.$message.success("已导入，如果无数据，可在“我的任务”中查看，id值为".concat(e.data,"，导入结果信息！")),r.getCardStockList()):r.$message.error(e.resultInfo)}))}}},y=f,b=(o("e6c3"),Object(c["a"])(y,a,r,!1,null,"4f9bb92e",null));t["default"]=b.exports},"7db0":function(e,t,o){"use strict";var a=o("23e7"),r=o("b727").find,l=o("44d2"),s="find",i=!0;s in[]&&Array(1)[s]((function(){i=!1})),a({target:"Array",proto:!0,forced:i},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),l(s)},"7f53":function(e,t,o){},e6c3:function(e,t,o){"use strict";o("7f53")}}]);
//# sourceMappingURL=chunk-0a927316.a06217e4.js.map