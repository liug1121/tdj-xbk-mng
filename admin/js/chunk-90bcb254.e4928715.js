(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-90bcb254"],{"365c":function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"a",(function(){return i}));a("d3b7");var o=a("bc3a"),r=a.n(o);r.a.defaults.timeout=5e5,r.a.defaults.headers.post["Content-Type"]="application/json",r.a.interceptors.request.use((function(t){return t.headers.token=window.sessionStorage.getItem("token"),t}),(function(t){return Promise.reject(t)})),r.a.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)}));var s=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.a.post(t,e,a).then((function(t){return t.data}))},i=function(t,e){return r.a.get(t,{params:e}).then((function(t){return t.data}))}},"3c65":function(t,e,a){"use strict";a("99af");var o=a("365c");e["a"]={apiProvincesList:function(t){return o["a"]("boss/v1.0/provinces",t)},apiPoisCitiesList:function(t){return o["b"]("boss/v1.0/pois/cities",t)},apiLbsAdd:function(t){return o["b"]("boss/v1.0/lbs/add",t)},apiLbsBlacks:function(t){return o["b"]("boss/v1.0/lbs/blacks",t)},apiLbsDetails:function(t){return o["b"]("boss/v1.0/lbs/card/details",t)},apiLbsDelete:function(t){return o["b"]("boss/v1.0/lbs/delete",t)},apiLbsGroupAdd:function(t){return o["b"]("boss/v1.0/lbs/group/add",t)},apiLbsGroupCardDetails:function(t){return o["b"]("boss/v1.0/lbs/group/card/details",t)},apiLbsGroupDetails:function(t){return o["b"]("boss/v1.0/lbs/group/details",t)},apiLbsGroupStatusModify:function(t){return o["b"]("boss/v1.0/lbs/group/status/modify",t)},apiLbsGroups:function(t){return o["b"]("boss/v1.0/lbs/groups",t)},apiLbsModify:function(t){return o["b"]("boss/v1.0/lbs/modify",t)},apiLbsStatusModify:function(t){return o["b"]("boss/v1.0/lbs/status/modify",t)},apiLbsGroupCardDownload:function(t,e){var a=t,r=e;return o["a"]("boss/v1.0/lbs/group/card/download/".concat(a,"/").concat(r))},apiLbsGroupCardUpload:function(t,e){return o["b"]("boss/v1.0/lbs/group/card/upload?groupId=".concat(e),t,{headers:{"content-type":"multipart/form-data"}})},apiLBSDownload:function(t){var e=t.iccid,a=t.channelId,r=t.startTime,s=t.endTime,i=t.provinceId,n=t.cityId;return o["a"]("boss/v1.0/lbs/card/download?iccid=".concat(e,"&channelId=").concat(a,"&startTime=").concat(r,"&endTime=").concat(s,"&provinceId=").concat(i,"&cityId=").concat(n))}}},"4c89":function(t,e,a){},d183:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box_subject"},[a("el-card",{staticClass:"all_list"},[a("div",{staticClass:"heraderTop"},[a("div",{staticClass:"button_content"},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:{indentity:"xbkBlackCardList-add"},expression:"{indentity:'xbkBlackCardList-add'}"}],attrs:{size:"medium",type:"primary",icon:"el-icon-plus"},on:{click:t.addShow}},[t._v("新增")])],1),a("el-form",{ref:"queryBlackCardFormRef",staticClass:"queryForm",attrs:{inline:!0,model:t.queryBlackCardFormModel}},[a("el-form-item",{staticClass:"queryFormItem",attrs:{label:"组分类"}},[a("el-select",{staticClass:"queryFormInput",attrs:{placeholder:"请选择组分类"},model:{value:t.queryBlackCardFormModel.groupId,callback:function(e){t.$set(t.queryBlackCardFormModel,"groupId",e)},expression:"queryBlackCardFormModel.groupId"}},t._l(t.blackCardlist,(function(t){return a("el-option",{key:t.groupId,attrs:{label:t.groupName,value:t.groupId}})})),1)],1),a("el-form-item",{staticClass:"queryFormItem",attrs:{label:"状态"}},[a("el-select",{staticClass:"queryFormInput",attrs:{placeholder:"请选择状态"},model:{value:t.queryBlackCardFormModel.status,callback:function(e){t.$set(t.queryBlackCardFormModel,"status",e)},expression:"queryBlackCardFormModel.status"}},t._l(t.statusOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{staticClass:"queryFormItem"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:function(e){return t.getBlackCardlist()}}},[t._v("查询")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.blackCardlist,border:"","max-height":"510px",align:"center","cell-style":{height:"38px",padding:0}},on:{"row-dblclick":t.handledbClick}},t._l(t.table_column,(function(e,o){return a("el-table-column",{key:o,attrs:{prop:e.prop,label:e.label,width:e.width,align:"center",fixed:!!e.fixed&&e.fixed},scopedSlots:t._u([{key:"default",fn:function(o){return["statusCL"==e.prop?a("div",[0==o.row.status?a("span",[t._v("停用")]):1==o.row.status?a("span",[t._v("启用")]):t._e()]):t._e(),"operation"==e.prop?a("div",[1==o.row.status?a("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(e){return t.deactivation(o.row,0)}}},[t._v("停用")]):t._e(),0==o.row.status?a("el-button",{attrs:{size:"mini",type:"warning",plain:""},on:{click:function(e){return t.deactivation(o.row,1)}}},[t._v("启用")]):t._e(),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.importData(o.row)}}},[t._v("导入卡")])],1):a("div",[a("div",{domProps:{innerHTML:t._s(o.row[e.prop])}})])]}}],null,!0)})})),1),a("el-pagination",{attrs:{"current-page":t.page,"page-sizes":[10,20,30],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),a("el-dialog",{attrs:{title:"新增",visible:t.addDialogVisible,width:"430px"},on:{"update:visible":function(e){t.addDialogVisible=e},close:t.addDialogClosed}},[a("el-form",{ref:"addFormRef",attrs:{model:t.addForm,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"组分类"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入组分类"},model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1),a("el-form-item",{attrs:{label:"定位间隔"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入定位间隔"},model:{value:t.addForm.lbsRate,callback:function(e){t.$set(t.addForm,"lbsRate",t._n(e))},expression:"addForm.lbsRate"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addUser}},[t._v("确 定")])],1)],1),a("ImportModal",{ref:"ImportModal",attrs:{groupId:t.groupId},on:{InportModalSuccess:t.InportModalSuccess}})],1)],1)},r=[],s=a("3c65"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"文件导入",visible:t.dialogVisible,width:"412px","close-on-click-modal":!1,"destroy-on-close":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"ImportForm",attrs:{model:t.ImportForm,"label-width":"120px"}},[a("el-upload",{staticClass:"unload-demo",attrs:{accept:".xls, .xlsx",action:"#","file-list":t.fileList,"http-request":t.uploadFile}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),a("div",{staticClass:"notice"},[a("p",[a("a",[t._v("下载模板文件")]),t._v(" 仅支持xlsx,xls格式的文件. ")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.clickConfirm()}}},[t._v("确 定")])],1)],1)},n=[],l={data:function(){return{dialogVisible:!1,ImportForm:{groupId:this.groupId,file:""},fileList:[]}},props:["fwAccountOptions","groupId"],methods:{uploadFile:function(t){var e=this;e.file=t.file},clickConfirm:function(){var t=this;if(t.file){var e=new FormData;e.append("file",t.file),e.append("groupId",t.groupId),this.$emit("InportModalSuccess",e),this.dialogVisible=!1}else t.$message.error({message:"请选择文件",type:"error",duration:2e3})}}},d=l,u=a("2877"),c=Object(u["a"])(d,i,n,!1,null,null,null),p=c.exports,b={components:{ImportModal:p},data:function(){return{blackCardlist:[],queryInfo:{page:0,pageSize:10},page:1,pageSize:10,total:0,table_column:[{prop:"groupName",label:"组分类"},{prop:"cardTotalNum",label:"卡数",width:150},{prop:"lbsRate",label:"定位间隔",width:150},{prop:"statusCL",label:"状态",width:150},{prop:"operation",label:"操作",width:200}],statusOptions:[{label:"使用",value:1},{label:"停用",value:0}],provinceOptions:[],queryBlackCardFormModel:{groupId:null,status:null},addDialogVisible:!1,addForm:{name:"",lbsRate:""},groupId:"",loading:!1}},mounted:function(){this.getBlackCardlist(),this.getprovinceOptions()},methods:{handledbClick:function(t,e,a){var o=t.groupId;sessionStorage.setItem("groupId",o),this.$router.push({path:"blackGroupDetails",query:{groupId:o}})},getBlackCardlist:function(){var t=this,e=this.queryBlackCardFormModel,a=Object.assign(this.queryInfo,e);this.loading=!0,s["a"].apiLbsGroups(a).then((function(e){0===e.resultCode?(t.blackCardlist=e.data,t.total=e.rowNum,t.loading=!1):t.$message.error(e.resultInfo)}))},handleSizeChange:function(t){this.queryInfo.pageSize=t,this.getBlackCardlist()},handleCurrentChange:function(t){this.queryInfo.page=t-1,this.getBlackCardlist()},getprovinceOptions:function(){var t=this,e={page:0,pageSize:100};s["a"].apiProvincesList(e).then((function(e){0===e.resultCode?t.provinceOptions=e.data:t.$message.error(e.resultInfo)}))},addShow:function(){this.addDialogVisible=!0},addDialogClosed:function(){this.$refs.addFormRef.resetFields()},addUser:function(){var t=this;this.$refs.addFormRef.validate((function(e){if(e){var a=JSON.stringify(t.addForm);s["a"].apiLbsGroupAdd(a).then((function(e){0===e.resultCode?(t.$message.success("添加成功！"),t.getBlackCardlist(),t.addDialogVisible=!1,t.$refs.addFormRef.resetFields()):t.$message.error(e.resultInfo)}))}}))},deactivation:function(t,e){var a=this,o={groupId:t.groupId,status:e};s["a"].apiLbsGroupStatusModify(o).then((function(t){0===t.resultCode?(a.$message.success("操作成功！"),a.getBlackCardlist()):a.$message.error(t.resultInfo)}))},importData:function(t){this.groupId=t.groupId,this.$refs.ImportModal.dialogVisible=!0},InportModalSuccess:function(t){var e=this;s["a"].apiLbsGroupCardUpload(t,this.groupId).then((function(t){0===t.resultCode?(e.$message.success("导入成功！"),e.getBlackCardlist()):e.$message.error(t.resultInfo)}))}}},f=b,m=(a("ed82"),Object(u["a"])(f,o,r,!1,null,"52cb7b6e",null));e["default"]=m.exports},ed82:function(t,e,a){"use strict";a("4c89")}}]);
//# sourceMappingURL=chunk-90bcb254.e4928715.js.map