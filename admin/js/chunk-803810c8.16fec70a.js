(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-803810c8"],{"092e":function(e,t,i){"use strict";i("fdde")},"365c":function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return r}));i("d3b7");var o=i("bc3a"),a=i.n(o);a.a.defaults.timeout=5e5,a.a.defaults.headers.post["Content-Type"]="application/json",a.a.interceptors.request.use((function(e){return e.headers.token=window.sessionStorage.getItem("token"),e}),(function(e){return Promise.reject(e)})),a.a.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));var s=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a.a.post(e,t,i).then((function(e){return e.data}))},r=function(e,t){return a.a.get(e,{params:t}).then((function(e){return e.data}))}},"3c65":function(e,t,i){"use strict";i("99af");var o=i("365c");t["a"]={apiProvincesList:function(e){return o["a"]("boss/v1.0/provinces",e)},apiPoisCitiesList:function(e){return o["b"]("boss/v1.0/pois/cities",e)},apiLbsAdd:function(e){return o["b"]("boss/v1.0/lbs/add",e)},apiLbsBlacks:function(e){return o["b"]("boss/v1.0/lbs/blacks",e)},apiLbsDetails:function(e){return o["b"]("boss/v1.0/lbs/card/details",e)},apiLbsDelete:function(e){return o["b"]("boss/v1.0/lbs/delete",e)},apiLbsGroupAdd:function(e){return o["b"]("boss/v1.0/lbs/group/add",e)},apiLbsGroupCardDetails:function(e){return o["b"]("boss/v1.0/lbs/group/card/details",e)},apiLbsGroupDetails:function(e){return o["b"]("boss/v1.0/lbs/group/details",e)},apiLbsGroupStatusModify:function(e){return o["b"]("boss/v1.0/lbs/group/status/modify",e)},apiLbsGroups:function(e){return o["b"]("boss/v1.0/lbs/groups",e)},apiLbsModify:function(e){return o["b"]("boss/v1.0/lbs/modify",e)},apiLbsStatusModify:function(e){return o["b"]("boss/v1.0/lbs/status/modify",e)},apiLbsGroupCardDownload:function(e,t){var i=e,a=t;return o["a"]("boss/v1.0/lbs/group/card/download/".concat(i,"/").concat(a))},apiLbsGroupCardUpload:function(e,t){return o["b"]("boss/v1.0/lbs/group/card/upload?groupId=".concat(t),e,{headers:{"content-type":"multipart/form-data"}})},apiLBSDownload:function(e){var t=e.iccid,i=e.channelId,a=e.startTime,s=e.endTime,r=e.provinceId,n=e.cityId;return o["a"]("boss/v1.0/lbs/card/download?iccid=".concat(t,"&channelId=").concat(i,"&startTime=").concat(a,"&endTime=").concat(s,"&provinceId=").concat(r,"&cityId=").concat(n))}}},"7db0":function(e,t,i){"use strict";var o=i("23e7"),a=i("b727").find,s=i("44d2"),r="find",n=!0;r in[]&&Array(1)[r]((function(){n=!1})),o({target:"Array",proto:!0,forced:n},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),s(r)},ade3:function(e,t,i){"use strict";function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"a",(function(){return o}))},d183:function(e,t,i){"use strict";i.r(t);var o,a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"box_subject"},[i("el-card",{staticClass:"all_list"},[i("div",{staticClass:"heraderTop"},[i("div",{staticClass:"button_content"},[i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:{indentity:"xbkBlackCardList-add"},expression:"{indentity:'xbkBlackCardList-add'}"}],attrs:{size:"medium",type:"primary",icon:"el-icon-plus"},on:{click:e.addShow}},[e._v("新增")])],1),i("el-form",{ref:"queryBlackCardFormRef",staticClass:"queryForm",attrs:{inline:!0,model:e.queryBlackCardFormModel}},[i("el-form-item",{staticClass:"queryFormItem",attrs:{label:"监控组名称"}},[i("el-select",{staticClass:"queryFormInput",attrs:{placeholder:"请选择监控组名称"},model:{value:e.queryBlackCardFormModel.groupId,callback:function(t){e.$set(e.queryBlackCardFormModel,"groupId",t)},expression:"queryBlackCardFormModel.groupId"}},e._l(e.blackCardlist,(function(e){return i("el-option",{key:e.groupId,attrs:{label:e.groupName,value:e.groupId}})})),1)],1),i("el-form-item",{staticClass:"queryFormItem"},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:function(t){return e.getBlackCardlist()}}},[e._v("查询")])],1)],1)],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.blackCardlist,border:"","max-height":"510px",align:"center","cell-style":{height:"38px",padding:0}},on:{"row-dblclick":e.handledbClick}},e._l(e.table_column,(function(t,o){return i("el-table-column",{key:o,attrs:{prop:t.prop,label:t.label,width:t.width,align:"center",fixed:!!t.fixed&&t.fixed},scopedSlots:e._u([{key:"default",fn:function(o){return["operation"==t.prop?i("div",[i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return e.importData(o.row)}}},[e._v("导入卡")])],1):i("div",[i("div",{domProps:{innerHTML:e._s(o.row[t.prop])}})])]}}],null,!0)})})),1),i("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[10,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),i("el-dialog",{attrs:{title:"新增",visible:e.addDialogVisible,width:"430px"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClosed}},[i("el-form",{ref:"addFormRef",attrs:{model:e.addForm,"label-width":"90px"}},[i("el-form-item",{attrs:{label:"监控组名称"}},[i("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入组分类"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),i("el-form-item",{attrs:{label:"监控类型"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",placeholder:"请输入监控类型"},on:{change:e.positionTypeChange},model:{value:e.selectedPositionTypeLabel,callback:function(t){e.selectedPositionTypeLabel=t},expression:"selectedPositionTypeLabel"}},e._l(e.positionTypes,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",{staticClass:"queryFormItem",attrs:{label:"省份"}},[i("el-select",{staticClass:"queryFormInput",attrs:{clearable:"",filterable:"",placeholder:"请选择省份"},on:{change:e.provinceChange},model:{value:e.selectedProvince,callback:function(t){e.selectedProvince=t},expression:"selectedProvince"}},e._l(e.provinceOptions,(function(e){return i("el-option",{key:e.provinceId,attrs:{label:e.provinceName,value:e.provinceId}})})),1)],1),i("el-form-item",{staticClass:"queryFormItem",attrs:{label:"城市"}},[i("el-select",{staticClass:"queryFormInput",staticStyle:{width:"100%"},attrs:{multiple:"",clearable:"",filterable:"",placeholder:"请选择城市名"},on:{change:e.cityChange},model:{value:e.selectedCities,callback:function(t){e.selectedCities=t},expression:"selectedCities"}},e._l(e.PoisCitiesList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),i("el-form-item",{staticClass:"queryFormItem",attrs:{label:""}}),i("el-form-item",{staticClass:"queryFormItem",attrs:{label:""}}),i("el-form-item",{staticClass:"queryFormItem",attrs:{label:""}})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")])],1)],1),i("ImportModal",{ref:"ImportModal",attrs:{groupId:e.groupId},on:{InportModalSuccess:e.InportModalSuccess}})],1)],1)},s=[],r=i("ade3"),n=(i("7db0"),i("3c65")),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"文件导入",visible:e.dialogVisible,width:"412px","close-on-click-modal":!1,"destroy-on-close":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{ref:"ImportForm",attrs:{model:e.ImportForm,"label-width":"120px"}},[i("el-upload",{staticClass:"unload-demo",attrs:{accept:".xls, .xlsx",action:"#","file-list":e.fileList,"http-request":e.uploadFile}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1),i("div",{staticClass:"notice"},[i("p",[i("a",[e._v("下载模板文件")]),e._v(" 仅支持xlsx,xls格式的文件. ")])]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.clickConfirm()}}},[e._v("确 定")])],1)],1)},c=[],d={data:function(){return{dialogVisible:!1,ImportForm:{groupId:this.groupId,file:""},fileList:[]}},props:["fwAccountOptions","groupId"],methods:{uploadFile:function(e){var t=this;t.file=e.file},clickConfirm:function(){var e=this;if(e.file){var t=new FormData;t.append("file",e.file),t.append("groupId",e.groupId),this.$emit("InportModalSuccess",t),this.dialogVisible=!1}else e.$message.error({message:"请选择文件",type:"error",duration:2e3})}}},u=d,p=i("2877"),f=Object(p["a"])(u,l,c,!1,null,null,null),b=f.exports,m={components:{ImportModal:b},data:function(){return{blackCardlist:[],queryInfo:{page:0,pageSize:10},page:1,pageSize:10,total:0,table_column:[{prop:"groupName",label:"监控组名称"},{prop:"positionTypeName",label:"监控类型"},{prop:"positionCityNames",label:"已选择的城市"},{prop:"cardTotalNum",label:"卡数",width:150},{prop:"operation",label:"操作",width:200}],statusOptions:[{label:"使用",value:1},{label:"停用",value:0}],positionTypes:[{label:"指定城市可以使用",value:1},{label:"指定城市不可以使用",value:0}],selectedPositionTypeValue:"",selectedPositionTypeLabel:"",selectedProvince:"",selectedCities:"",provinceOptions:[],PoisCitiesList:[],queryBlackCardFormModel:{groupId:null,status:null},addDialogVisible:!1,addForm:{name:"",lbsRate:""},groupId:"",loading:!1}},mounted:function(){this.getBlackCardlist(),this.getprovinceOptions()},methods:(o={cityChange:function(e){},provinceChange:function(e){var t={};t=this.provinceOptions.find((function(t){return t.provinceId===e})),void 0==t&&(t={}),this.getPoisCitiesList(t.provinceId)},getprovinceOptions:function(){var e=this;n["a"].apiProvincesList().then((function(t){if(0===t.resultCode){e.provinceOptions=t.data;var i=e.provinceOptions[0].provinceId;e.getPoisCitiesList(i)}else e.$message.error(t.resultInfo)}))},getPoisCitiesList:function(e){var t=this,i={provinceId:e};n["a"].apiPoisCitiesList(i).then((function(e){0===e.resultCode?t.PoisCitiesList=e.data:t.$message.error(e.resultInfo)}))},positionTypeChange:function(e){for(var t=0;t<this.positionTypes.length;t++)this.positionTypes[t].value===e&&(this.selectedPositionTypeValue=this.positionTypes[t].value,this.selectedPositionTypeLabel=this.positionTypes[t].label)},handledbClick:function(e,t,i){var o=e.groupId;sessionStorage.setItem("groupId",o),this.$router.push({path:"blackGroupDetails",query:{groupId:o}})},getBlackCardlist:function(){var e=this,t=this.queryBlackCardFormModel,i=Object.assign(this.queryInfo,t);this.loading=!0,n["a"].apiLbsGroups(i).then((function(t){0===t.resultCode?(e.blackCardlist=t.data,e.total=t.rowNum,e.loading=!1):e.$message.error(t.resultInfo)}))},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getBlackCardlist()},handleCurrentChange:function(e){this.queryInfo.page=e-1,this.getBlackCardlist()}},Object(r["a"])(o,"getprovinceOptions",(function(){var e=this,t={page:0,pageSize:100};n["a"].apiProvincesList(t).then((function(t){0===t.resultCode?e.provinceOptions=t.data:e.$message.error(t.resultInfo)}))})),Object(r["a"])(o,"addShow",(function(){this.addDialogVisible=!0})),Object(r["a"])(o,"addDialogClosed",(function(){this.$refs.addFormRef.resetFields()})),Object(r["a"])(o,"addUser",(function(){var e=this;this.$refs.addFormRef.validate((function(t){if(t){e.addForm.positionType=e.selectedPositionTypeValue,e.addForm.poiIds=e.selectedCities;var i=JSON.stringify(e.addForm);n["a"].apiLbsGroupAdd(i).then((function(t){0===t.resultCode?(e.$message.success("添加成功！"),e.getBlackCardlist(),e.addDialogVisible=!1,e.$refs.addFormRef.resetFields()):e.$message.error(t.resultInfo)}))}}))})),Object(r["a"])(o,"deactivation",(function(e,t){var i=this,o={groupId:e.groupId,status:t};n["a"].apiLbsGroupStatusModify(o).then((function(e){0===e.resultCode?(i.$message.success("操作成功！"),i.getBlackCardlist()):i.$message.error(e.resultInfo)}))})),Object(r["a"])(o,"importData",(function(e){this.groupId=e.groupId,this.$refs.ImportModal.dialogVisible=!0})),Object(r["a"])(o,"InportModalSuccess",(function(e){var t=this;n["a"].apiLbsGroupCardUpload(e,this.groupId).then((function(e){0===e.resultCode?(t.$message.success("导入成功！"),t.getBlackCardlist()):t.$message.error(e.resultInfo)}))})),o)},g=m,v=(i("092e"),Object(p["a"])(g,a,s,!1,null,"69f324f4",null));t["default"]=v.exports},fdde:function(e,t,i){}}]);
//# sourceMappingURL=chunk-803810c8.16fec70a.js.map